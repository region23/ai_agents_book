–ù–∞—á–Ω—ë–º —Å –≥–ª–∞–≤–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
–ü—Ä–µ–∂–¥–µ —á–µ–º –ø–∏—Å–∞—Ç—å –∫–æ–¥ ‚Äî –∫–∞–∫ —Ç—ã —Å–∞–º –ø–æ–Ω–∏–º–∞–µ—à—å, —á—Ç–æ —Ç–∞–∫–æ–µ "–∞–≥–µ–Ω—Ç" –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ LLM-—á–∞—Ç–∞?
–ü–æ–ø—Ä–æ–±—É–π —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏–º–∏ —Å–ª–æ–≤–∞–º–∏: –≤ —á—ë–º –∫–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ?

–ü–ª–∞–Ω –¥–≤–∏–∂–µ–Ω–∏—è (–æ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ –∫ —Å–ª–æ–∂–Ω–æ–º—É)

–ë–∞–∑–æ–≤—ã–π LLM-–≤—ã–∑–æ–≤ ‚Äî –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–æ–º–ø—Ç, –ø–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
+ Tools ‚Äî –¥–∞—ë–º –º–æ–¥–µ–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å "–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å" (–≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏)
+ Tool execution loop ‚Äî –∞–≥–µ–Ω—Ç —Å–∞–º —Ä–µ—à–∞–µ—Ç, –∫–∞–∫–æ–π tool –≤—ã–∑–≤–∞—Ç—å –∏ –∫–æ–≥–¥–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è
+ Skills/Memory ‚Äî –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ capabilities, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏


–ö–æ–≥–¥–∞ –æ—Ç–≤–µ—Ç–∏—à—å –Ω–∞ –≤–æ–ø—Ä–æ—Å –≤—ã—à–µ, –Ω–∞—á–Ω—ë–º —Å –ø–µ—Ä–≤–æ–≥–æ —à–∞–≥–∞ ‚Äî –Ω–∞–ø–∏—à–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π "hello world" —Å –≤—ã–∑–æ–≤–æ–º LLM API.
–ö–∞–∫–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Ö–æ—á–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å? –£ —Ç–µ–±—è –µ—Å—Ç—å –∫–ª—é—á–∏ –æ—Ç Anthropic, OpenAI, –∏–ª–∏ —Ö–æ—á–µ—à—å —á–µ—Ä–µ–∑ OpenRouter –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–∞–∑–Ω—ã–º –º–æ–¥–µ–ª—è–º?

---

–ö–∞–∫ —Ç—ã —É–∂–µ –Ω–∞–ø–∏—Å–∞–ª –≤—ã—à–µ, —è –ø–æ–Ω–∏–º–∞—é –∞–≥–µ–Ω—Ç–∞ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º: —ç—Ç–æ –õ–õ–ú-–≤—ã–∑–æ–≤. –ö–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π output, response. –í –≤–∏–¥–µ json –∏ –Ω–∞–ø—Ä–∏–º–µ—Ä –ü–æ —ç—Ç–æ–º—É —Ä–µ—Å–ø–æ–Ω—Å—É –ø–æ —ç—Ç–æ–º—É JSON –º—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–∞–∫—É—é —Ç—É–ª–∑—É –≤—ã–∑–≤–∞—Ç—å. –¢—É–ª–∑–∞ —ç—Ç–æ –∫–∞–∫–æ–π-—Ç–æ –º–µ—Ç–æ–¥ –≤ –Ω–∞—à–µ–º –∫–æ–¥–µ. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ —É–∂–µ –º–æ–∂–µ—Ç –∏ —Ä–µ–∞–ª—å–Ω—ã–π —Ç—É–ª –≤—ã–∑—ã–≤–∞—Ç—å, –±–∞—à–æ–≤—Å–∫–∏–π –∫–∞–∫–æ–π-—Ç–æ –ª–∏–±–æ –∫–∞–∫–æ–π-—Ç–æ –º–µ—Ç–æ–¥ –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å. –í–æ—Ç –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —ç—Ç–æ—Ç –º–µ—Ç–æ–¥, –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∫–∞–∫–æ–π-—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ú—ã —ç—Ç–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –µ—â–µ —Ä–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ LLM –æ–ø—è—Ç—å –ø–æ–ª—É—á–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—É—Ç–ø—É—Å–∫. –ò —Ç–∞–∫ —Ä–∞–±–æ—Ç–∞–µ–º –≤ –ø–µ—Ç–ª–µ. –î–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –õ–õ–ú —Å–∞–º–∞ –Ω–µ —Ä–µ—à–∏—Ç, —á—Ç–æ –ø–æ—Ä–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è. –í–æ—Ç —Ç–∞–∫ —è —ç—Ç–æ –ø–æ–Ω–∏–º–∞—é. –ü—Ä–æ–≤–∞–π–¥–µ—Ä —Ö–æ—á—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ù–∞–≤–µ—Ä–Ω–æ–µ, –æ–ø–µ–Ω—Ä–æ—É—Ç–µ—Ä–æ–≤—Å–∫–∏–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ª–∏–±–æ –Ω—É –¥–∞, –ø–æ–∫–∞ OpenRauter, –Ω–∞–≤–µ—Ä–Ω–æ–µ.

---

–û—Ç–ª–∏—á–Ω–æ, –ü–∞—à–∞! –¢—ã –ø–æ–Ω–∏–º–∞–µ—à—å —Å—É—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –≠—Ç–æ –∏ –µ—Å—Ç—å core loop –∞–≥–µ–Ω—Ç–∞:

```
LLM ‚Üí structured output ‚Üí parse ‚Üí execute tool ‚Üí add result to context ‚Üí repeat
```

–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —É—Ç–æ—á–Ω–µ–Ω–∏–µ: —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ LLM API (Anthropic, OpenAI) —É–∂–µ –∏–º–µ—é—Ç **–Ω–∞—Ç–∏–≤–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É tools** ‚Äî —Ç—ã –æ–ø–∏—Å—ã–≤–∞–µ—à—å tools –≤ –∑–∞–ø—Ä–æ—Å–µ, –∏ –º–æ–¥–µ–ª—å —Å–∞–º–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `tool_calls` –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ. –ù–µ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å–∏—Ç—å "–≤–µ—Ä–Ω–∏ JSON" ‚Äî —ç—Ç–æ —É–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω–æ.

---

## –®–∞–≥ 1: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π LLM-–≤—ã–∑–æ–≤

–î–∞–≤–∞–π –Ω–∞—á–Ω—ë–º —Å —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞. –°–æ–∑–¥–∞—ë–º –ø—Ä–æ–µ–∫—Ç:

```bash
mkdir simple-agent && cd simple-agent
npm init -y
npm install openai typescript tsx @types/node
npx tsc --init
```

–¢–µ–ø–µ—Ä—å –±–∞–∑–æ–≤—ã–π –≤—ã–∑–æ–≤ —á–µ—Ä–µ–∑ OpenRouter:

```typescript
// src/01-basic-call.ts
import OpenAI from "openai";

const client = new OpenAI({
  baseURL: "https://openrouter.ai/api/v1",
  apiKey: process.env.OPENROUTER_API_KEY,
});

async function main() {
  const response = await client.chat.completions.create({
    model: "anthropic/claude-sonnet-4-20250514",
    messages: [
      { role: "user", content: "–°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç 2 + 2?" }
    ],
  });

  console.log(response.choices[0].message.content);
}

main();
```

–ó–∞–ø—É—Å–∫:
```bash
OPENROUTER_API_KEY=—Ç–≤–æ–π_–∫–ª—é—á npx tsx src/01-basic-call.ts
```

---

**–ü–æ–ø—Ä–æ–±—É–π –∑–∞–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ.** –ö–æ–≥–¥–∞ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –¥–≤–∏–Ω–µ–º—Å—è –∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –ø–µ—Ä–≤–æ–≥–æ tool.

–ï—Å—Ç—å —É —Ç–µ–±—è –∫–ª—é—á –æ—Ç OpenRouter?

---

–†–∞–±–æ—Ç–∞–µ—Ç ‚Äî –∑–Ω–∞—á–∏—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –µ—Å—Ç—å. –ü—Ä–∞–≤–∏–ª—å–Ω–æ —á—Ç–æ –¥–æ–±–∞–≤–∏–ª dotenv –∏ —É–±—Ä–∞–ª –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω–æ–µ –∏–º—è –º–æ–¥–µ–ª–∏.

## –®–∞–≥ 2: –î–æ–±–∞–≤–ª—è–µ–º –ø–µ—Ä–≤—ã–π Tool

–°–µ–π—á–∞—Å –∫–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç ‚Äî –≤–æ—Ç –∫–∞–∫ –º–æ–¥–µ–ª—å —É–∑–Ω–∞—ë—Ç –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö tools:

```typescript
// src/02-with-tool.ts
import OpenAI from "openai";
import dotenv from "dotenv";

dotenv.config();

const client = new OpenAI({
    baseURL: "https://openrouter.ai/api/v1",
    apiKey: process.env.OPENROUTER_API_KEY ?? "",
});

// 1. –û–ø–∏—Å—ã–≤–∞–µ–º tools ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ JSON Schema
const tools: OpenAI.ChatCompletionTool[] = [
    {
        type: "function",
        function: {
            name: "get_weather",
            description: "–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–≥–æ–¥—É –≤ –≥–æ—Ä–æ–¥–µ",
            parameters: {
                type: "object",
                properties: {
                    city: {
                        type: "string",
                        description: "–ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞",
                    },
                },
                required: ["city"],
            },
        },
    },
];

// 2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è tool ‚Äî –æ–±—ã—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
function get_weather(city: string): string {
    // –ü–æ–∫–∞ —Ñ–µ–π–∫–æ–≤–∞—è, –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ —Ä–µ–∞–ª—å–Ω—ã–π API
    const data: Record<string, string> = {
        "–ú–æ—Å–∫–≤–∞": "‚àí5¬∞C, —Å–Ω–µ–≥",
        "–ê–Ω–∞–ø–∞": "+8¬∞C, –æ–±–ª–∞—á–Ω–æ",
        "–õ–æ–Ω–¥–æ–Ω": "+3¬∞C, –¥–æ–∂–¥—å",
    };
    return data[city] ?? `–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥–æ—Ä–æ–¥–∞ ${city}`;
}

async function main() {
    const response = await client.chat.completions.create({
        model: "anthropic/claude-sonnet-4.5",
        messages: [
            { role: "user", content: "–ö–∞–∫–∞—è –ø–æ–≥–æ–¥–∞ –≤ –ê–Ω–∞–ø–µ?" },
        ],
        tools,
    });

    const message = response.choices[0].message;

    // 3. –°–º–æ—Ç—Ä–∏–º —á—Ç–æ –≤–µ—Ä–Ω—É–ª–∞ –º–æ–¥–µ–ª—å
    console.log("=== –û—Ç–≤–µ—Ç –º–æ–¥–µ–ª–∏ ===");
    console.log("Content:", message.content);
    console.log("Tool calls:", JSON.stringify(message.tool_calls, null, 2));
}

main();
```

–ó–∞–ø—É—Å—Ç–∏ —ç—Ç–æ –∏ –ø–æ—Å–º–æ—Ç—Ä–∏ —á—Ç–æ –≤–µ—Ä–Ω—ë—Ç –º–æ–¥–µ–ª—å. –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ: –æ–Ω–∞ **–Ω–µ –æ—Ç–≤–µ—Ç–∏—Ç —Ç–µ–∫—Å—Ç–æ–º** ‚Äî –æ–Ω–∞ –≤–µ—Ä–Ω—ë—Ç `tool_calls` —Å –∏–º–µ–Ω–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏. –í–æ—Ç —ç—Ç–æ –∏ –µ—Å—Ç—å —Ç–æ—Ç structured output, –æ –∫–æ—Ç–æ—Ä–æ–º —Ç—ã –≥–æ–≤–æ—Ä–∏–ª, —Ç–æ–ª—å–∫–æ –Ω–∞—Ç–∏–≤–Ω—ã–π.

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–∫–∞–∂–∏ —á—Ç–æ —É–≤–∏–¥–µ–ª ‚Äî –∏ –¥–æ–±–∞–≤–∏–º execution loop.

---

=== –û—Ç–≤–µ—Ç –º–æ–¥–µ–ª–∏ ===
Content: 
Tool calls: [
  {
    "type": "function",
    "index": 0,
    "id": "toolu_vrtx_01WeGmRZbe85apvYG8zVhFJd",
    "function": {
      "name": "get_weather",
      "arguments": "{\"city\": \"–ê–Ω–∞–ø–∞\"}"
    }
  }
]

---
–í–∏–¥–∏—à—å? Content –ø—É—Å—Ç–æ–π, –∑–∞—Ç–æ `tool_calls` –∑–∞–ø–æ–ª–Ω–µ–Ω. –ú–æ–¥–µ–ª—å —Å–∞–º–∞ —Ä–µ—à–∏–ª–∞: "–º–Ω–µ –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å get_weather —Å –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –ê–Ω–∞–ø–∞". –û–Ω–∞ –Ω–µ –≤—ã–¥—É–º–∞–ª–∞ –ø–æ–≥–æ–¥—É, –∞ –ø–æ–ø—Ä–æ—Å–∏–ª–∞ –Ω–∞—Å –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é.

## –®–∞–≥ 3: Agent Loop

–¢–µ–ø–µ—Ä—å —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ ‚Äî –∑–∞–º—ã–∫–∞–µ–º –ø–µ—Ç–ª—é. –≠—Ç–æ –∏ –¥–µ–ª–∞–µ—Ç –∞–≥–µ–Ω—Ç–∞ –∞–≥–µ–Ω—Ç–æ–º:

```typescript
// src/03-agent-loop.ts
import OpenAI from "openai";
import dotenv from "dotenv";

dotenv.config();

const client = new OpenAI({
    baseURL: "https://openrouter.ai/api/v1",
    apiKey: process.env.OPENROUTER_API_KEY ?? "",
});

const tools: OpenAI.ChatCompletionTool[] = [
    {
        type: "function",
        function: {
            name: "get_weather",
            description: "–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–≥–æ–¥—É –≤ –≥–æ—Ä–æ–¥–µ",
            parameters: {
                type: "object",
                properties: {
                    city: { type: "string", description: "–ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞" },
                },
                required: ["city"],
            },
        },
    },
    {
        type: "function",
        function: {
            name: "get_time",
            description: "–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤ –≥–æ—Ä–æ–¥–µ",
            parameters: {
                type: "object",
                properties: {
                    city: { type: "string", description: "–ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞" },
                },
                required: ["city"],
            },
        },
    },
];

// –†–µ–µ—Å—Ç—Ä —Ñ—É–Ω–∫—Ü–∏–π ‚Äî –º–∞–ø–ø–∏–Ω–≥ –∏–º—è ‚Üí —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
const toolHandlers: Record<string, (args: any) => string> = {
    get_weather: ({ city }) => {
        const data: Record<string, string> = {
            "–ú–æ—Å–∫–≤–∞": "‚àí5¬∞C, —Å–Ω–µ–≥",
            "–ê–Ω–∞–ø–∞": "+8¬∞C, –æ–±–ª–∞—á–Ω–æ",
        };
        return data[city] ?? `–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è ${city}`;
    },
    get_time: ({ city }) => {
        const now = new Date();
        return `–°–µ–π—á–∞—Å –≤ ${city}: ${now.toLocaleTimeString("ru-RU")}`;
    },
};

async function agentLoop(userMessage: string) {
    // –ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
    const messages: OpenAI.ChatCompletionMessageParam[] = [
        { role: "system", content: "–¢—ã –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. –ò—Å–ø–æ–ª—å–∑—É–π tools –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ." },
        { role: "user", content: userMessage },
    ];

    let iteration = 0;
    const MAX_ITERATIONS = 10; // –∑–∞—â–∏—Ç–∞ –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

    while (iteration < MAX_ITERATIONS) {
        iteration++;
        console.log(`\n--- –ò—Ç–µ—Ä–∞—Ü–∏—è ${iteration} ---`);

        const response = await client.chat.completions.create({
            model: "anthropic/claude-sonnet-4.5",
            messages,
            tools,
        });

        const message = response.choices[0].message;

        // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç –º–æ–¥–µ–ª–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
        messages.push(message);

        // –ï—Å–ª–∏ –Ω–µ—Ç tool_calls ‚Äî –º–æ–¥–µ–ª—å —Ä–µ—à–∏–ª–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è
        if (!message.tool_calls || message.tool_calls.length === 0) {
            console.log("–ê–≥–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É.");
            console.log("–û—Ç–≤–µ—Ç:", message.content);
            return message.content;
        }

        // –í—ã–ø–æ–ª–Ω—è–µ–º –∫–∞–∂–¥—ã–π tool call
        for (const toolCall of message.tool_calls) {
            const name = toolCall.function.name;
            const args = JSON.parse(toolCall.function.arguments);

            console.log(`Tool: ${name}(${JSON.stringify(args)})`);

            const handler = toolHandlers[name];
            const result = handler
                ? handler(args)
                : `–û—à–∏–±–∫–∞: tool "${name}" –Ω–µ –Ω–∞–π–¥–µ–Ω`;

            console.log(`–†–µ–∑—É–ª—å—Ç–∞—Ç: ${result}`);

            // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
            messages.push({
                role: "tool",
                tool_call_id: toolCall.id,
                content: result,
            });
        }
        // –¶–∏–∫–ª –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ LLM
    }

    console.log("–î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç –∏—Ç–µ—Ä–∞—Ü–∏–π!");
}

// –¢–µ—Å—Ç–∏—Ä—É–µ–º ‚Äî –∑–∞–ø—Ä–æ—Å, —Ç—Ä–µ–±—É—é—â–∏–π –î–í–ê tool call
agentLoop("–ö–∞–∫–∞—è –ø–æ–≥–æ–¥–∞ –≤ –ú–æ—Å–∫–≤–µ –∏ –ê–Ω–∞–ø–µ? –ò —Å–∫–æ–ª—å–∫–æ —Å–µ–π—á–∞—Å –≤—Ä–µ–º–µ–Ω–∏?");
```

–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:

- **`while` loop** ‚Äî –∫—Ä—É—Ç–∏–º—Å—è –ø–æ–∫–∞ –º–æ–¥–µ–ª—å –Ω–µ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `tool_calls`
- **`messages` –º–∞—Å—Å–∏–≤ —Ä–∞—Å—Ç—ë—Ç** ‚Äî –∫–∞–∂–¥—ã–π tool result –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è, –º–æ–¥–µ–ª—å –≤–∏–¥–∏—Ç –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é
- **–ú–æ–¥–µ–ª—å —Å–∞–º–∞ —Ä–µ—à–∞–µ—Ç** –∫–æ–≥–¥–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è ‚Äî –∫–æ–≥–¥–∞ —É –Ω–µ—ë –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö, –æ–Ω–∞ –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–º
- **MAX_ITERATIONS** ‚Äî –∑–∞—â–∏—Ç–∞, —á—Ç–æ–±—ã –∞–≥–µ–Ω—Ç –Ω–µ —É—à—ë–ª –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å

–ó–∞–ø—É—Å—Ç–∏ –∏ –ø–æ—Å–º–æ—Ç—Ä–∏ –∫–∞–∫ –º–æ–¥–µ–ª—å —Å–¥–µ–ª–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—ã–∑–æ–≤–æ–≤ –∑–∞ –æ–¥–Ω—É —Å–µ—Å—Å–∏—é.

---

--- –ò—Ç–µ—Ä–∞—Ü–∏—è 1 ---
Tool: get_weather({"city":"–ú–æ—Å–∫–≤–∞"})
–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚àí5¬∞C, —Å–Ω–µ–≥
Tool: get_weather({"city":"–ê–Ω–∞–ø–∞"})
–†–µ–∑—É–ª—å—Ç–∞—Ç: +8¬∞C, –æ–±–ª–∞—á–Ω–æ
Tool: get_time({"city":"–ú–æ—Å–∫–≤–∞"})
–†–µ–∑—É–ª—å—Ç–∞—Ç: –°–µ–π—á–∞—Å –≤ –ú–æ—Å–∫–≤–∞: 09:39:53
--- –ò—Ç–µ—Ä–∞—Ü–∏—è 2 ---
–ê–≥–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É.
–û—Ç–≤–µ—Ç: –í–æ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –≤—ã –∑–∞–ø—Ä–æ—Å–∏–ª–∏:
**–ü–æ–≥–æ–¥–∞:**
- **–ú–æ—Å–∫–≤–∞**: ‚àí5¬∞C, —Å–Ω–µ–≥
- **–ê–Ω–∞–ø–∞**: +8¬∞C, –æ–±–ª–∞—á–Ω–æ
**–í—Ä–µ–º—è –≤ –ú–æ—Å–∫–≤–µ**: 09:39:53

---

–í–∏–¥–∏—à—å –∫–∞–∫ –∫—Ä–∞—Å–∏–≤–æ:

**–ò—Ç–µ—Ä–∞—Ü–∏—è 1** ‚Äî –º–æ–¥–µ–ª—å –≤–µ—Ä–Ω—É–ª–∞ —Å—Ä–∞–∑—É 3 tool_calls –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑ (–æ–Ω–∞ –ø–æ–Ω—è–ª–∞, —á—Ç–æ –Ω—É–∂–Ω—ã –≤—Å–µ —Ç—Ä–∏). –ú—ã –≤—ã–ø–æ–ª–Ω–∏–ª–∏, –¥–æ–±–∞–≤–∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç.

**–ò—Ç–µ—Ä–∞—Ü–∏—è 2** ‚Äî –º–æ–¥–µ–ª—å –ø–æ–ª—É—á–∏–ª–∞ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, —Ä–µ—à–∏–ª–∞ —á—Ç–æ —Ö–≤–∞—Ç–∏—Ç, –∏ –æ—Ç–≤–µ—Ç–∏–ª–∞ —Ç–µ–∫—Å—Ç–æ–º. –¶–∏–∫–ª –∑–∞–≤–µ—Ä—à–∏–ª—Å—è.

–í–æ—Ç —ç—Ç–æ –∏ –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π agent loop. –í—Å—ë —á—Ç–æ —Ç—ã –æ–ø–∏—Å—ã–≤–∞–ª —Å–ª–æ–≤–∞–º–∏ ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ 80 —Å—Ç—Ä–æ–∫–∞—Ö –∫–æ–¥–∞.

## –®–∞–≥ 4: –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∞–ª—å–Ω—ã–π Tool

–î–∞–≤–∞–π –∑–∞–º–µ–Ω–∏–º —Ñ–µ–π–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —á—Ç–æ-—Ç–æ –Ω–∞—Å—Ç–æ—è—â–µ–µ ‚Äî –ø—É—Å—Ç—å –∞–≥–µ–Ω—Ç —É–º–µ–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å bash-–∫–æ–º–∞–Ω–¥—ã:

```typescript
// src/04-real-tools.ts
import OpenAI from "openai";
import { execSync } from "child_process";
import dotenv from "dotenv";

dotenv.config();

const client = new OpenAI({
    baseURL: "https://openrouter.ai/api/v1",
    apiKey: process.env.OPENROUTER_API_KEY ?? "",
});

const tools: OpenAI.ChatCompletionTool[] = [
    {
        type: "function",
        function: {
            name: "run_bash",
            description: "–í—ã–ø–æ–ª–Ω–∏—Ç—å bash-–∫–æ–º–∞–Ω–¥—É –∏ –≤–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –¢–æ–ª—å–∫–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ read-only –∫–æ–º–∞–Ω–¥—ã.",
            parameters: {
                type: "object",
                properties: {
                    command: {
                        type: "string",
                        description: "Bash-–∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è",
                    },
                },
                required: ["command"],
            },
        },
    },
    {
        type: "function",
        function: {
            name: "read_file",
            description: "–ü—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞",
            parameters: {
                type: "object",
                properties: {
                    path: {
                        type: "string",
                        description: "–ü—É—Ç—å –∫ —Ñ–∞–π–ª—É",
                    },
                },
                required: ["path"],
            },
        },
    },
];

const toolHandlers: Record<string, (args: any) => string> = {
    run_bash: ({ command }) => {
        try {
            return execSync(command, {
                encoding: "utf-8",
                timeout: 5000,
            }).trim();
        } catch (e: any) {
            return `–û—à–∏–±–∫–∞: ${e.message}`;
        }
    },
    read_file: ({ path }) => {
        try {
            const fs = require("fs");
            return fs.readFileSync(path, "utf-8");
        } catch (e: any) {
            return `–û—à–∏–±–∫–∞: ${e.message}`;
        }
    },
};

async function agentLoop(userMessage: string) {
    const messages: OpenAI.ChatCompletionMessageParam[] = [
        {
            role: "system",
            content: `–¢—ã –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ.
–ú–æ–∂–µ—à—å –≤—ã–ø–æ–ª–Ω—è—Ç—å bash-–∫–æ–º–∞–Ω–¥—ã –∏ —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã.
–û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º.`,
        },
        { role: "user", content: userMessage },
    ];

    let iteration = 0;

    while (iteration < 10) {
        iteration++;
        console.log(`\n--- –ò—Ç–µ—Ä–∞—Ü–∏—è ${iteration} ---`);

        const response = await client.chat.completions.create({
            model: "anthropic/claude-sonnet-4.5",
            messages,
            tools,
        });

        const message = response.choices[0].message;
        messages.push(message);

        if (!message.tool_calls?.length) {
            console.log("\n–ê–≥–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É.");
            console.log("–û—Ç–≤–µ—Ç:", message.content);
            return;
        }

        for (const toolCall of message.tool_calls) {
            const name = toolCall.function.name;
            const args = JSON.parse(toolCall.function.arguments);
            console.log(`Tool: ${name}(${JSON.stringify(args)})`);

            const result = toolHandlers[name]?.(args)
                ?? `Tool "${name}" –Ω–µ –Ω–∞–π–¥–µ–Ω`;

            console.log(`–†–µ–∑—É–ª—å—Ç–∞—Ç: ${result.slice(0, 200)}...`);

            messages.push({
                role: "tool",
                tool_call_id: toolCall.id,
                content: result,
            });
        }
    }
}

// –¢–µ–ø–µ—Ä—å –∞–≥–µ–Ω—Ç –º–æ–∂–µ—Ç —Ä–µ–∞–ª—å–Ω–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ç–≤–æ—é —Å–∏—Å—Ç–µ–º—É
agentLoop("–ü–æ—Å–º–æ—Ç—Ä–∏ —á—Ç–æ –∑–∞ –ø—Ä–æ–µ–∫—Ç –ª–µ–∂–∏—Ç –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. –ö–∞–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã?");
```

–≠—Ç–æ —É–∂–µ –∞–≥–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —Ä–µ–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç–≤–æ–µ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π. –ó–∞–ø—É—Å—Ç–∏ ‚Äî –æ–Ω —Å–∞–º —Ä–µ—à–∏—Ç –∫–∞–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å, —á—Ç–æ–±—ã –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å.

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —à–∞–≥–∞ –º–æ–∂–µ–º –¥–≤–∏–Ω—É—Ç—å—Å—è –∫ **Skills** ‚Äî —ç—Ç–æ –ø–æ —Å—É—Ç–∏ –Ω–∞–±–æ—Ä—ã tools + system prompt, –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–¥–∞—á—É. –•–æ—á–µ—à—å –ø—Ä–æ–¥–æ–ª–∂–∏–º?


---

--- –ò—Ç–µ—Ä–∞—Ü–∏—è 1 ---
Tool: run_bash({"command":"ls -la"})
–†–µ–∑—É–ª—å—Ç–∞—Ç: total 72
drwxr-xr-x  10 region23  staff    320 Feb  5 09:40 .
drwxr-xr-x  30 region23  staff    960 Feb  5 09:13 ..
-rw-r--r--@  1 region23  staff     93 Feb  5 09:18 .env
drwxr-xr-x@ 13 region23  sta...
--- –ò—Ç–µ—Ä–∞—Ü–∏—è 2 ---
Tool: read_file({"path":"package.json"})
–†–µ–∑—É–ª—å—Ç–∞—Ç: –û—à–∏–±–∫–∞: require is not defined...
Tool: read_file({"path":"README.md"})
–†–µ–∑—É–ª—å—Ç–∞—Ç: –û—à–∏–±–∫–∞: require is not defined...
--- –ò—Ç–µ—Ä–∞—Ü–∏—è 3 ---
Tool: run_bash({"command":"cat package.json"})
–†–µ–∑—É–ª—å—Ç–∞—Ç: {
  "name": "simple-agent",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author":...
--- –ò—Ç–µ—Ä–∞—Ü–∏—è 4 ---
Tool: run_bash({"command":"cat README.md 2>/dev/null || echo \"README.md –Ω–µ –Ω–∞–π–¥–µ–Ω\""})
–†–µ–∑—É–ª—å—Ç–∞—Ç: README.md –Ω–µ –Ω–∞–π–¥–µ–Ω...
Tool: run_bash({"command":"ls -la src/"})
–†–µ–∑—É–ª—å—Ç–∞—Ç: total 32
drwxr-xr-x@  6 region23  staff   192 Feb  5 14:57 .
drwxr-xr-x  10 region23  staff   320 Feb  5 09:40 ..
-rw-r--r--@  1 region23  staff   538 Feb  5 09:29 01-basic-call.ts
-rw-r--r--@  1 regi...
--- –ò—Ç–µ—Ä–∞—Ü–∏—è 5 ---
–ê–≥–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É.
–û—Ç–≤–µ—Ç: –û—Ç–ª–∏—á–Ω–æ! –í–æ—Ç —á—Ç–æ —è –≤—ã—è—Å–Ω–∏–ª:
## –ü—Ä–æ–µ–∫—Ç: simple-agent
–≠—Ç–æ **Node.js/TypeScript –ø—Ä–æ–µ–∫—Ç** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å AI –∞–≥–µ–Ω—Ç–∞–º–∏ (—Å—É–¥—è –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ñ–∞–π–ª–æ–≤).
### –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
1. **openai** (^6.17.0) - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ OpenAI –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
2. **dotenv** (^17.2.3) - –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ .env —Ñ–∞–π–ª–∞
3. **typescript** (^5.9.3) - –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä TypeScript
4. **tsx** (^4.21.0) - –¥–ª—è –∑–∞–ø—É—Å–∫–∞ TypeScript —Ñ–∞–π–ª–æ–≤ –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
5. **@types/node** (^25.2.0) - —Ç–∏–ø—ã TypeScript –¥–ª—è Node.js
### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:
–í –ø–∞–ø–∫–µ `src/` –Ω–∞—Ö–æ–¥—è—Ç—Å—è 4 —Ñ–∞–π–ª–∞ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏:
- `01-basic-call.ts` - –±–∞–∑–æ–≤—ã–π –≤—ã–∑–æ–≤
- `02-with-tool.ts` - —Ä–∞–±–æ—Ç–∞ —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
- `03-agent-loop.ts` - –∞–≥–µ–Ω—Ç—Å–∫–∏–π —Ü–∏–∫–ª
- `04-real-tools.ts` - —Ä–µ–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
–≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ —É—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –Ω–∞–±–æ—Ä –ø—Ä–∏–º–µ—Ä–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è AI –∞–≥–µ–Ω—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º OpenAI API —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–π/–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.
–•–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —è –ø–æ—Å–º–æ—Ç—Ä–µ–ª —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞–∫–æ–≥–æ-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞?

---

–û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–µ—â–µ–π:

**–ë–∞–≥ —Å `require`** ‚Äî –≤ ESM-–∫–æ–Ω—Ç–µ–∫—Å—Ç–µ `require` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç. –ê–≥–µ–Ω—Ç –ø–æ–ª—É—á–∏–ª –æ—à–∏–±–∫—É, –Ω–æ –Ω–µ —Å–ª–æ–º–∞–ª—Å—è ‚Äî –æ–Ω –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–∏–ª—Å—è –Ω–∞ `cat` —á–µ—Ä–µ–∑ bash. –í–æ—Ç —ç—Ç–æ –∏ –µ—Å—Ç—å resilience –∞–≥–µ–Ω—Ç–∞: LLM –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –æ—à–∏–±–∫–∞–º.

**5 –∏—Ç–µ—Ä–∞—Ü–∏–π** ‚Äî –º–æ–¥–µ–ª—å —Å–∞–º–∞ —Ä–µ—à–∞–ª–∞ —á—Ç–æ –¥–µ–ª–∞—Ç—å –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ. –°–Ω–∞—á–∞–ª–∞ `ls`, –ø–æ—Ç–æ–º –ø–æ–ø—Ä–æ–±–æ–≤–∞–ª–∞ read_file, –ø–æ–ª—É—á–∏–ª–∞ –æ—à–∏–±–∫—É, –Ω–∞—à–ª–∞ –æ–±—Ö–æ–¥–Ω–æ–π –ø—É—Ç—å, —Å–æ–±—Ä–∞–ª–∞ –≤—Å—ë –∏ –æ—Ç–≤–µ—Ç–∏–ª–∞.

–î–∞–≤–∞–π –ø–æ—Ñ–∏–∫—Å–∏–º –±–∞–≥ –∏ –¥–≤–∏–Ω–µ–º—Å—è –∫ Skills:

```typescript
// –ó–∞–º–µ–Ω–∏ read_file handler –Ω–∞:
read_file: ({ path }) => {
    try {
        const { readFileSync } = require("fs");
        return readFileSync(path, "utf-8");
    } catch (e: any) {
        return `–û—à–∏–±–∫–∞: ${e.message}`;
    }
},
```

–•–æ—Ç—è –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, —Ä–∞–∑ —É –Ω–∞—Å –µ—Å—Ç—å `run_bash` ‚Äî `read_file` –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å —Å–æ–≤—Å–µ–º, `cat` –¥–µ–ª–∞–µ—Ç —Ç–æ –∂–µ —Å–∞–º–æ–µ. –ù–æ –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ª—É—á—à–µ –∏–º–µ—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ tools: –æ–Ω–∏ –¥–∞—é—Ç –º–æ–¥–µ–ª–∏ –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —á—Ç–æ –¥–æ—Å—Ç—É–ø–Ω–æ.

## –®–∞–≥ 5: Skills

Skill ‚Äî —ç—Ç–æ –ø–æ —Å—É—Ç–∏ **tool + –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**. –ù–∞–±–æ—Ä —Å–≤—è–∑–∞–Ω–Ω—ã—Ö capabilities –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–¥–∞—á—É.

–î–∞–≤–∞–π —Å–¥–µ–ª–∞–µ–º –ø—Ä–æ—Å—Ç—É—é —Å–∏—Å—Ç–µ–º—É skills:

```typescript
// src/05-skills.ts
import OpenAI from "openai";
import { execSync } from "child_process";
import { readFileSync, writeFileSync, existsSync } from "fs";
import dotenv from "dotenv";

dotenv.config();

const client = new OpenAI({
    baseURL: "https://openrouter.ai/api/v1",
    apiKey: process.env.OPENROUTER_API_KEY ?? "",
});

// === SKILL: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ ===
interface Skill {
    name: string;
    description: string;           // –¥–ª—è system prompt
    tools: OpenAI.ChatCompletionTool[];
    handlers: Record<string, (args: any) => string>;
}

// === SKILL: —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ ===
const filesystemSkill: Skill = {
    name: "filesystem",
    description: "–£–º–µ–µ—à—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ñ–∞–π–ª–∞–º–∏: —á–∏—Ç–∞—Ç—å, –ø–∏—Å–∞—Ç—å, –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.",
    tools: [
        {
            type: "function",
            function: {
                name: "read_file",
                description: "–ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª",
                parameters: {
                    type: "object",
                    properties: {
                        path: { type: "string", description: "–ü—É—Ç—å –∫ —Ñ–∞–π–ª—É" },
                    },
                    required: ["path"],
                },
            },
        },
        {
            type: "function",
            function: {
                name: "write_file",
                description: "–ó–∞–ø–∏—Å–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤ —Ñ–∞–π–ª",
                parameters: {
                    type: "object",
                    properties: {
                        path: { type: "string", description: "–ü—É—Ç—å –∫ —Ñ–∞–π–ª—É" },
                        content: { type: "string", description: "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ" },
                    },
                    required: ["path", "content"],
                },
            },
        },
        {
            type: "function",
            function: {
                name: "list_dir",
                description: "–°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏",
                parameters: {
                    type: "object",
                    properties: {
                        path: { type: "string", description: "–ü—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏" },
                    },
                    required: ["path"],
                },
            },
        },
    ],
    handlers: {
        read_file: ({ path }) => {
            try { return readFileSync(path, "utf-8"); }
            catch (e: any) { return `–û—à–∏–±–∫–∞: ${e.message}`; }
        },
        write_file: ({ path, content }) => {
            try { writeFileSync(path, content); return `–§–∞–π–ª ${path} –∑–∞–ø–∏—Å–∞–Ω`; }
            catch (e: any) { return `–û—à–∏–±–∫–∞: ${e.message}`; }
        },
        list_dir: ({ path }) => {
            try { return execSync(`ls -la ${path}`, { encoding: "utf-8" }); }
            catch (e: any) { return `–û—à–∏–±–∫–∞: ${e.message}`; }
        },
    },
};

// === SKILL: bash ===
const bashSkill: Skill = {
    name: "bash",
    description: "–£–º–µ–µ—à—å –≤—ã–ø–æ–ª–Ω—è—Ç—å bash-–∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.",
    tools: [
        {
            type: "function",
            function: {
                name: "run_bash",
                description: "–í—ã–ø–æ–ª–Ω–∏—Ç—å bash-–∫–æ–º–∞–Ω–¥—É",
                parameters: {
                    type: "object",
                    properties: {
                        command: { type: "string", description: "–ö–æ–º–∞–Ω–¥–∞" },
                    },
                    required: ["command"],
                },
            },
        },
    ],
    handlers: {
        run_bash: ({ command }) => {
            try {
                return execSync(command, { encoding: "utf-8", timeout: 5000 }).trim();
            } catch (e: any) { return `–û—à–∏–±–∫–∞: ${e.message}`; }
        },
    },
};

// === SKILL: –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ ===
const mathSkill: Skill = {
    name: "math",
    description: "–£–º–µ–µ—à—å –≤—ã—á–∏—Å–ª—è—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è.",
    tools: [
        {
            type: "function",
            function: {
                name: "calculate",
                description: "–í—ã—á–∏—Å–ª–∏—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ",
                parameters: {
                    type: "object",
                    properties: {
                        expression: { type: "string", description: "–í—ã—Ä–∞–∂–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä: 2 * (3 + 4)" },
                    },
                    required: ["expression"],
                },
            },
        },
    ],
    handlers: {
        calculate: ({ expression }) => {
            try { return String(eval(expression)); }
            catch (e: any) { return `–û—à–∏–±–∫–∞: ${e.message}`; }
        },
    },
};

// === –ê–ì–ï–ù–¢ —Å –ø–æ–¥–∫–ª—é—á–∞–µ–º—ã–º–∏ skills ===
function createAgent(skills: Skill[]) {
    // –°–æ–±–∏—Ä–∞–µ–º tools –∏ handlers –∏–∑ –≤—Å–µ—Ö skills
    const allTools = skills.flatMap(s => s.tools);
    const allHandlers = Object.assign({}, ...skills.map(s => s.handlers));

    // –°–æ–±–∏—Ä–∞–µ–º system prompt –∏–∑ –æ–ø–∏—Å–∞–Ω–∏–π skills
    const skillDescriptions = skills
        .map(s => `- ${s.name}: ${s.description}`)
        .join("\n");

    const systemPrompt = `–¢—ã –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. –£ —Ç–µ–±—è –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –Ω–∞–≤—ã–∫–∏:
${skillDescriptions}
–ò—Å–ø–æ–ª—å–∑—É–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ. –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º.`;

    return async function run(userMessage: string) {
        const messages: OpenAI.ChatCompletionMessageParam[] = [
            { role: "system", content: systemPrompt },
            { role: "user", content: userMessage },
        ];

        let iteration = 0;

        while (iteration < 10) {
            iteration++;
            console.log(`\n--- –ò—Ç–µ—Ä–∞—Ü–∏—è ${iteration} ---`);

            const response = await client.chat.completions.create({
                model: "anthropic/claude-sonnet-4.5",
                messages,
                tools: allTools,
            });

            const message = response.choices[0].message;
            messages.push(message);

            if (!message.tool_calls?.length) {
                console.log("\n–û—Ç–≤–µ—Ç:", message.content);
                return message.content;
            }

            for (const toolCall of message.tool_calls) {
                const name = toolCall.function.name;
                const args = JSON.parse(toolCall.function.arguments);
                console.log(`Tool: ${name}(${JSON.stringify(args)})`);

                const result = allHandlers[name]?.(args)
                    ?? `Tool "${name}" –Ω–µ –Ω–∞–π–¥–µ–Ω`;
                console.log(`‚Üí ${result.slice(0, 150)}`);

                messages.push({
                    role: "tool",
                    tool_call_id: toolCall.id,
                    content: result,
                });
            }
        }
    };
}

// === –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ===
async function main() {
    // –°–æ–∑–¥–∞—ë–º –∞–≥–µ–Ω—Ç–∞ —Å –Ω—É–∂–Ω—ã–º–∏ skills
    const agent = createAgent([filesystemSkill, bashSkill, mathSkill]);

    // –ê–≥–µ–Ω—Ç —Å–∞–º —Ä–µ—à–∏—Ç –∫–∞–∫–∏–µ tools –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
    await agent(
        "–ü–æ—Å–º–æ—Ç—Ä–∏ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, " +
        "–ø–æ—Å—á–∏—Ç–∞–π –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –≤–æ –≤—Å–µ—Ö .ts —Ñ–∞–π–ª–∞—Ö –≤ src/, " +
        "–∏ —Å–æ–∑–¥–∞–π —Ñ–∞–π–ª STATS.md —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∞–Ω–∞–ª–∏–∑–∞."
    );
}

main();
```

–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è: **–∞–≥–µ–Ω—Ç –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è, –º–µ–Ω—è—é—Ç—Å—è skills**. –•–æ—á–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å API ‚Äî —Å–æ–∑–¥–∞—ë—à—å –Ω–æ–≤—ã–π Skill. –•–æ—á–µ—à—å —É–±—Ä–∞—Ç—å bash ‚Äî –ø—Ä–æ—Å—Ç–æ –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—à—å. `createAgent([...skills])` ‚Äî –∏ –≥–æ—Ç–æ–≤–æ.

–ó–∞–ø—É—Å—Ç–∏ –∏ –ø–æ—Å–º–æ—Ç—Ä–∏ –∫–∞–∫ –æ–Ω –∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç tools –∏–∑ —Ä–∞–∑–Ω—ã—Ö skills –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏.

---

```typescript
// src/04-real-tools.ts
import OpenAI from "openai";
import { execSync } from "child_process";
import { readFileSync } from "fs";
import dotenv from "dotenv";

dotenv.config();

const client = new OpenAI({
    baseURL: "https://openrouter.ai/api/v1",
    apiKey: process.env.OPENROUTER_API_KEY ?? "",
});

const tools: OpenAI.ChatCompletionTool[] = [
    {
        type: "function",
        function: {
            name: "run_bash",
            description: "–í—ã–ø–æ–ª–Ω–∏—Ç—å bash-–∫–æ–º–∞–Ω–¥—É –∏ –≤–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –¢–æ–ª—å–∫–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ read-only –∫–æ–º–∞–Ω–¥—ã.",
            parameters: {
                type: "object",
                properties: {
                    command: {
                        type: "string",
                        description: "Bash-–∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è",
                    },
                },
                required: ["command"],
            },
        },
    },
    {
        type: "function",
        function: {
            name: "read_file",
            description: "–ü—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞",
            parameters: {
                type: "object",
                properties: {
                    path: {
                        type: "string",
                        description: "–ü—É—Ç—å –∫ —Ñ–∞–π–ª—É",
                    },
                },
                required: ["path"],
            },
        },
    },
];

const toolHandlers: Record<string, (args: any) => string> = {
    run_bash: ({ command }) => {
        try {
            return execSync(command, {
                encoding: "utf-8",
                timeout: 5000,
            }).trim();
        } catch (e: any) {
            return `–û—à–∏–±–∫–∞: ${e.message}`;
        }
    },
    read_file: ({ path }) => {
        try {
            const { readFileSync } = require("fs");
            return readFileSync(path, "utf-8");
        } catch (e: any) {
            return `–û—à–∏–±–∫–∞: ${e.message}`;
        }
    },
};

async function agentLoop(userMessage: string) {
    const messages: OpenAI.ChatCompletionMessageParam[] = [
        {
            role: "system",
            content: `–¢—ã –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ.
–ú–æ–∂–µ—à—å –≤—ã–ø–æ–ª–Ω—è—Ç—å bash-–∫–æ–º–∞–Ω–¥—ã –∏ —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã.
–û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º.`,
        },
        { role: "user", content: userMessage },
    ];

    let iteration = 0;

    while (iteration < 10) {
        iteration++;
        console.log(`\n--- –ò—Ç–µ—Ä–∞—Ü–∏—è ${iteration} ---`);

        const response = await client.chat.completions.create({
            model: "anthropic/claude-sonnet-4.5",
            messages,
            tools,
        });

        const message = response.choices[0].message;
        messages.push(message);

        if (!message.tool_calls?.length) {
            console.log("\n–ê–≥–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É.");
            console.log("–û—Ç–≤–µ—Ç:", message.content);
            return;
        }

        for (const toolCall of message.tool_calls) {
            const name = toolCall.function.name;
            const args = JSON.parse(toolCall.function.arguments);
            console.log(`Tool: ${name}(${JSON.stringify(args)})`);

            const result = toolHandlers[name]?.(args)
                ?? `Tool "${name}" –Ω–µ –Ω–∞–π–¥–µ–Ω`;

            console.log(`–†–µ–∑—É–ª—å—Ç–∞—Ç: ${result.slice(0, 200)}...`);

            messages.push({
                role: "tool",
                tool_call_id: toolCall.id,
                content: result,
            });
        }
    }
}

// –¢–µ–ø–µ—Ä—å –∞–≥–µ–Ω—Ç –º–æ–∂–µ—Ç —Ä–µ–∞–ª—å–Ω–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ç–≤–æ—é —Å–∏—Å—Ç–µ–º—É
agentLoop("–ü–æ—Å–º–æ—Ç—Ä–∏ —á—Ç–æ –∑–∞ –ø—Ä–æ–µ–∫—Ç –ª–µ–∂–∏—Ç –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. –ö–∞–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã?");



```

--- –ò—Ç–µ—Ä–∞—Ü–∏—è 1 ---
Tool: run_bash({"command":"ls -la"})
–†–µ–∑—É–ª—å—Ç–∞—Ç: total 72
drwxr-xr-x  10 region23  staff    320 Feb  5 09:40 .
drwxr-xr-x  30 region23  staff    960 Feb  5 09:13 ..
-rw-r--r--@  1 region23  staff     93 Feb  5 09:18 .env
drwxr-xr-x@ 13 region23  sta...
--- –ò—Ç–µ—Ä–∞—Ü–∏—è 2 ---
Tool: read_file({"path":"package.json"})
–†–µ–∑—É–ª—å—Ç–∞—Ç: –û—à–∏–±–∫–∞: require is not defined...
Tool: read_file({"path":"tsconfig.json"})
–†–µ–∑—É–ª—å—Ç–∞—Ç: –û—à–∏–±–∫–∞: require is not defined...
Tool: run_bash({"command":"ls -la src/"})
–†–µ–∑—É–ª—å—Ç–∞—Ç: total 32
drwxr-xr-x@  6 region23  staff   192 Feb  5 14:57 .
drwxr-xr-x  10 region23  staff   320 Feb  5 09:40 ..
-rw-r--r--@  1 region23  staff   538 Feb  5 09:29 01-basic-call.ts
-rw-r--r--@  1 regi...
--- –ò—Ç–µ—Ä–∞—Ü–∏—è 3 ---
Tool: run_bash({"command":"cat package.json"})
–†–µ–∑—É–ª—å—Ç–∞—Ç: {
  "name": "simple-agent",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author":...
Tool: run_bash({"command":"cat tsconfig.json"})
–†–µ–∑—É–ª—å—Ç–∞—Ç: {
  // Visit https://aka.ms/tsconfig to read more about this file
  "compilerOptions": {
    // File Layout
    // "rootDir": "./src",
    // "outDir": "./dist",
    // Environment Settings
    // See...
--- –ò—Ç–µ—Ä–∞—Ü–∏—è 4 ---
–ê–≥–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É.
–û—Ç–≤–µ—Ç: –û—Ç–ª–∏—á–Ω–æ! –í–æ—Ç —á—Ç–æ —è —É–∑–Ω–∞–ª –æ –ø—Ä–æ–µ–∫—Ç–µ:
## üì¶ –ü—Ä–æ–µ–∫—Ç: **simple-agent**
–≠—Ç–æ Node.js –ø—Ä–æ–µ–∫—Ç —Å TypeScript –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ (–≤–µ—Ä–æ—è—Ç–Ω–æ, AI-–∞–≥–µ–Ω—Ç–∞).
### –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
1. **openai** (^6.17.0) - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ OpenAI –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏—Ö API
2. **dotenv** (^17.2.3) - –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ `.env` —Ñ–∞–π–ª–∞
3. **typescript** (^5.9.3) - TypeScript –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä
4. **tsx** (^4.21.0) - –¥–ª—è –∑–∞–ø—É—Å–∫–∞ TypeScript —Ñ–∞–π–ª–æ–≤ –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
5. **@types/node** (^25.2.0) - —Ç–∏–ø—ã TypeScript –¥–ª—è Node.js
### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:
–í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/` –Ω–∞—Ö–æ–¥—è—Ç—Å—è 4 —Ñ–∞–π–ª–∞ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏:
- `01-basic-call.ts` - –±–∞–∑–æ–≤—ã–π –≤—ã–∑–æ–≤
- `02-with-tool.ts` - —Ä–∞–±–æ—Ç–∞ —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
- `03-agent-loop.ts` - –∞–≥–µ–Ω—Ç—Å–∫–∏–π —Ü–∏–∫–ª
- `04-real-tools.ts` - —Ä–µ–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ES –º–æ–¥—É–ª–∏ `"type": "module"` –≤ package.json) –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å —Å—Ç—Ä–æ–≥–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ TypeScript –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
–≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ —É—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å AI-–∞–≥–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ OpenAI API! ü§ñ

---

–†–∞–±–æ—Ç–∞–µ—Ç, –∏ –±–∞–≥ —Å `require` –≤—Å—ë –µ—â—ë –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è ‚Äî –Ω–æ –∞–≥–µ–Ω—Ç —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è. –î–∞–≤–∞–π –ø–æ—Ñ–∏–∫—Å–∏–º –∏ –ø–æ–π–¥—ë–º –¥–∞–ª—å—à–µ.

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ `require` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ ESM. –£ —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å `import { readFileSync } from "fs"` –Ω–∞–≤–µ—Ä—Ö—É —Ñ–∞–π–ª–∞ ‚Äî –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π –µ–≥–æ –Ω–∞–ø—Ä—è–º—É—é:

```typescript
read_file: ({ path }) => {
    try {
        return readFileSync(path, "utf-8");
    } catch (e: any) {
        return `–û—à–∏–±–∫–∞: ${e.message}`;
    }
},
```

–¢–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞–π **05-skills.ts** ‚Äî —Ç–∞–º —É–∂–µ –≤—Å—ë —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏. –≠—Ç–æ –∫–ª—é—á–µ–≤–æ–π —à–∞–≥: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –≥–¥–µ –∞–≥–µ–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ –ø–æ–¥–∫–ª—é—á–∞–µ–º—ã—Ö –º–æ–¥—É–ª–µ–π. –¢–æ—Ç –∂–µ –ø—Ä–∏–Ω—Ü–∏–ø, —á—Ç–æ –≤ tsagent, —Ç–æ–ª—å–∫–æ –≤ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º –≤–∏–¥–µ.

---

6 –∏—Ç–µ—Ä–∞—Ü–∏–π, 3 —Ä–∞–∑–Ω—ã—Ö skill'–∞ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω—ã, —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω. –ê–≥–µ–Ω—Ç —Å–∞–º —Å–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: —Å–Ω–∞—á–∞–ª–∞ –æ—Å–º–æ—Ç—Ä–µ–ª—Å—è, –ø–æ—Ç–æ–º –ø—Ä–æ—á–∏—Ç–∞–ª –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª, –ø–æ—Å—á–∏—Ç–∞–ª —Å—Ç—Ä–æ–∫–∏, –∏ –Ω–∞–ø–∏—Å–∞–ª –æ—Ç—á—ë—Ç.

## –ß—Ç–æ —Ç—ã –ø–æ—Å—Ç—Ä–æ–∏—à—å –∑–∞ 5 —à–∞–≥–æ–≤

```
01 ‚Üí LLM-–≤—ã–∑–æ–≤              (–ø—Ä–æ—Å—Ç–æ –∑–∞–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç)
02 ‚Üí + tools                 (–º–æ–¥–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç tool_calls)
03 ‚Üí + agent loop            (—Ü–∏–∫–ª: –≤—ã–∑–≤–∞–ª ‚Üí –≤—ã–ø–æ–ª–Ω–∏–ª ‚Üí –æ–±—Ä–∞—Ç–Ω–æ –≤ LLM)
04 ‚Üí + —Ä–µ–∞–ª—å–Ω—ã–µ tools        (bash, —Ñ–∞–π–ª—ã ‚Äî –∞–≥–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Å–∏—Å—Ç–µ–º–æ–π)
05 ‚Üí + skills –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞    (–º–æ–¥—É–ª—å–Ω—ã–µ –Ω–∞–±–æ—Ä—ã tools, –ø–æ–¥–∫–ª—é—á–∞–µ–º—ã–µ –∫ –∞–≥–µ–Ω—Ç—É)
```

–≠—Ç–æ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç core –º–µ—Ö–∞–Ω–∏–∫—É –ª—é–±–æ–≥–æ –∞–≥–µ–Ω—Ç–∞. Claude Code, Cursor, tsagent ‚Äî –≤—Å–µ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ —ç—Ç–æ–º –∂–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–µ, –ø—Ä–æ—Å—Ç–æ —Å –±–æÃÅ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º skills, –ª—É—á—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ –∏ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–º–∏ system prompts.

## –ß—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

–ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–ª—è —É—Å–ª–æ–∂–Ω–µ–Ω–∏—è. –ß—Ç–æ –±–ª–∏–∂–µ –∫ —Ç–≤–æ–∏–º –∑–∞–¥–∞—á–∞–º?

- **Memory** ‚Äî –∞–≥–µ–Ω—Ç –ø–æ–º–Ω–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏ (—Ñ–∞–π–ª –∏–ª–∏ –ë–î)
- **Multi-step planning** ‚Äî –∞–≥–µ–Ω—Ç —Å–Ω–∞—á–∞–ª–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–ª–∞–Ω, –ø–æ—Ç–æ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç
- **Human-in-the-loop** ‚Äî –∞–≥–µ–Ω—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –æ–ø–∞—Å–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏ (–∫–∞–∫ `write_file`)
- **Streaming** ‚Äî –æ—Ç–≤–µ—Ç—ã –∏ tool calls –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–ù–æ–≤—ã–µ skills** ‚Äî HTTP-–∑–∞–ø—Ä–æ—Å—ã, —Ä–∞–±–æ—Ç–∞ —Å Git, Telegram API
---

## –®–∞–≥ 6: Multi-step Planning

–ò–¥–µ—è –ø—Ä–æ—Å—Ç–∞—è: –ø–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å, –∞–≥–µ–Ω—Ç —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–ª–∞–Ω. –ü–æ—Ç–æ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç –µ–≥–æ –ø–æ—à–∞–≥–æ–≤–æ, –æ—Ç–º–µ—á–∞—è –ø—Ä–æ–≥—Ä–µ—Å—Å.

–ï—Å—Ç—å –¥–≤–∞ –ø–æ–¥—Ö–æ–¥–∞:

1. **Plan-then-execute** ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ LLM –¥–ª—è –ø–ª–∞–Ω–∞, –ø–æ—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
2. **ReAct** (Reasoning + Acting) ‚Äî –∞–≥–µ–Ω—Ç –¥—É–º–∞–µ—Ç –∏ –¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ

–°–¥–µ–ª–∞–µ–º –æ–±–∞, —á—Ç–æ–±—ã —Ç—ã —É–≤–∏–¥–µ–ª —Ä–∞–∑–Ω–∏—Ü—É.–í–æ—Ç —Ñ–∞–π–ª, –∫–∏–¥–∞–π –≤ `src/06-planning.ts`. –î–≤–∞ –ø–æ–¥—Ö–æ–¥–∞ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ.

## –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å

```bash
# –ü–æ–¥—Ö–æ–¥ 1: Plan-then-Execute
npx tsx src/06-planning.ts plan

# –ü–æ–¥—Ö–æ–¥ 2: ReAct
npx tsx src/06-planning.ts react
```

## –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –ø–æ–¥—Ö–æ–¥–∞–º–∏

**Plan-then-Execute** ‚Äî –¥–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–∞ LLM. –ü–µ—Ä–≤—ã–π (–±–µ–∑ tools) —Å–æ–∑–¥–∞—ë—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON-–ø–ª–∞–Ω. –í—Ç–æ—Ä–æ–π –ø–æ–ª—É—á–∞–µ—Ç —ç—Ç–æ—Ç –ø–ª–∞–Ω –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ —à–∞–≥–∞–º. –ü–ª—é—Å: –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å, –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –ø–ª–∞–Ω —é–∑–µ—Ä—É –¥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –ú–∏–Ω—É—Å: –ø–ª–∞–Ω –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è –Ω–µ—Ç–æ—á–Ω—ã–º, –º–æ–¥–µ–ª—å –Ω–µ –∑–Ω–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã.

**ReAct** ‚Äî –æ–¥–∏–Ω —Ü–∏–∫–ª, –Ω–æ —Å `think` tool. –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –¥–µ–π—Å—Ç–≤–∏–µ–º –∞–≥–µ–Ω—Ç "–¥—É–º–∞–µ—Ç –≤—Å–ª—É—Ö": —á—Ç–æ —è –∑–Ω–∞—é, —á—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ, –ø–æ—á–µ–º—É. –ü–ª—é—Å: –∞–≥–µ–Ω—Ç –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –ª–µ—Ç—É, –≤–∏–¥–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –ú–∏–Ω—É—Å: –º–µ–Ω–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ, –±–æ–ª—å—à–µ –∏—Ç–µ—Ä–∞—Ü–∏–π.

`think` tool ‚Äî —ç—Ç–æ —Ö–∏—Ç—Ä—ã–π –ø—Ä–∏—ë–º. –û–Ω –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏, –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "OK". –ù–æ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ–¥–µ–ª—å **–≤–µ—Ä–±–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–µ** –ø–µ—Ä–µ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º, —á—Ç–æ —Å–∏–ª—å–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Ä–µ—à–µ–Ω–∏–π.

–ó–∞–ø—É—Å—Ç–∏ –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∏ —Å—Ä–∞–≤–Ω–∏ –≤—ã–≤–æ–¥ ‚Äî —É–≤–∏–¥–∏—à—å —Ä–∞–∑–Ω–∏—Ü—É –≤ "–º—ã—à–ª–µ–Ω–∏–∏".

---

–ê —á—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —ç—Ç–∏ 2 –ø–æ–¥—Ö–æ–¥–∞ Plan-then-Execute –∏ ReAct

---

–•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å. –≠—Ç–æ –∏ –µ—Å—Ç—å —Ç–æ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã ‚Äî **plan ‚Üí execute with reasoning ‚Üí replan if needed**.–ö–∏–¥–∞–π –≤ `src/07-adaptive-agent.ts` –∏ –∑–∞–ø—É—Å–∫–∞–π:

```bash
npx tsx src/07-adaptive-agent.ts
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–¢—Ä–∏ —Ñ–∞–∑—ã –≤ —Ü–∏–∫–ª–µ:

```
Plan ‚Üí ReAct Execute ‚Üí Replan? ‚Üí ReAct Execute ‚Üí Done
```

**–§–∞–∑–∞ 1: Plan** ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π LLM-–≤—ã–∑–æ–≤ –±–µ–∑ tools. –ú–æ–¥–µ–ª—å —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON-–ø–ª–∞–Ω, –Ω–µ –∑–Ω–∞—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã.

**–§–∞–∑–∞ 2: ReAct Execute** ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–ª–∞–Ω —Å `think` tool. –ù–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –¥—É–º–∞–µ—Ç: "—Å–æ–≤–ø–∞–¥–∞–µ—Ç –ª–∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å —Å –ø–ª–∞–Ω–æ–º?" –ï—Å–ª–∏ –º–µ–ª–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ ‚Äî –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –ª–µ—Ç—É.

**–§–∞–∑–∞ 3: Replan** ‚Äî –µ—Å–ª–∏ –∞–≥–µ–Ω—Ç –≤—ã–∑–≤–∞–ª `request_replan`, —Ü–∏–∫–ª –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—é. –ù–æ —Ç–µ–ø–µ—Ä—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–Ω–∞–µ—Ç: —á—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ, —á—Ç–æ –Ω–æ–≤–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏, –ø–æ—á–µ–º—É —Å—Ç–∞—Ä—ã–π –ø–ª–∞–Ω –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç.

–ö–ª—é—á–µ–≤–∞—è –Ω–æ–≤–∏–Ω–∫–∞ ‚Äî **`request_replan` tool**. –ê–≥–µ–Ω—Ç —Å–∞–º —Ä–µ—à–∞–µ—Ç –∫–æ–≥–¥–∞ –ø–ª–∞–Ω —Å–ª–æ–º–∞–ª—Å—è –Ω–∞—Å—Ç–æ–ª—å–∫–æ, —á—Ç–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–æ—Å–º—ã—Å–ª–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é. –≠—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –æ—Ç —Ç—É–ø–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è: –æ–Ω –Ω–µ –±—É–¥–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω, –Ω–æ –∏ –Ω–µ –±—É–¥–µ—Ç —Ä–µ–ø–ª—ç–Ω–∏—Ç—å –Ω–∞ –∫–∞–∂–¥—ã–π —á–∏—Ö.

–ü–æ–ø—Ä–æ–±—É–π ‚Äî –ø–æ—Å–º–æ—Ç—Ä–∏, –∑–∞–ø—Ä–æ—Å–∏—Ç –ª–∏ –æ–Ω —Ä–µ–ø–ª–∞–Ω –Ω–∞ —Ç–≤–æ—ë–º –ø—Ä–æ–µ–∫—Ç–µ.

---

–î–∞–≤–∞–π —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Human-in-the-loop –∏ —Ä–µ–∞–ª–∏–∑—É–µ–º –µ–≥–æ.
–ê —Ç–∞–∫–∂–µ —è —Å–µ–π—á–∞—Å –Ω–∞–±–ª—é–¥–∞—é –ø–æ–¥—Ö–æ–¥, –∫–æ–≥–¥–∞ –∞–≥–µ–Ω—Ç –¥—É–º–∞–µ—Ç/—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–æ–º –∏ –∑–∞—Ç–µ–º –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ª–∏–±–æ –≤–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Ç–∞–∫–æ–π –≤–∏–∑–∞—Ä–¥ –º–æ–∂–µ—Ç —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —à–∞–≥–æ–≤. –¢–æ –µ—Å—Ç—å –æ–Ω –ø–æ–¥—É–º–∞–ª –∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —É–∂–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –µ–º—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥–æ—Ç–æ–≤—ã—Ö –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π, –∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–∞–¥–æ –ª–∏—à—å –≤—ã–±—Ä–∞—Ç—å, –Ω—É –ª–∏–±–æ –≤–≤–µ—Å—Ç–∏ —Å–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç
---

–û—Ç–ª–∏—á–Ω–æ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ. –≠—Ç–æ –¥–≤–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–∞:

1. **Human-in-the-loop** ‚Äî –∞–≥–µ–Ω—Ç –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –æ–ø–∞—Å–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏
2. **Wizard/Guide** ‚Äî –∞–≥–µ–Ω—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã, –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤—ã–±–æ—Ä, –∏ —Ç–∞–∫ –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤

–û–±–∞ —Å—Ç—Ä–æ—è—Ç—Å—è –Ω–∞ –æ–¥–Ω–æ–π –∏–¥–µ–µ: **–∞–≥–µ–Ω—Ç —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Ç–æ–∫–æ–º, –Ω–æ —á–µ–ª–æ–≤–µ–∫ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è**.–ö–∏–¥–∞–π –≤ `src/08-interactive-agent.ts`.

## –¢—Ä–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è

```bash
# Wizard: —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å –Ω—É–ª—è (–ø–æ—à–∞–≥–æ–≤—ã–π –≥–∞–π–¥)
npx tsx src/08-interactive-agent.ts project

# –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: –∞–Ω–∞–ª–∏–∑ ‚Üí –≤–∞—Ä–∏–∞–Ω—Ç—ã ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ‚Üí –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
npx tsx src/08-interactive-agent.ts refactor

# –°–≤–æ–±–æ–¥–Ω—ã–π —Ä–µ–∂–∏–º
npx tsx src/08-interactive-agent.ts free
```

## –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ

**–¢—Ä–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö tool'–∞** ‚Äî —ç—Ç–æ –∫–ª—é—á–µ–≤–æ–µ. –ú–æ–¥–µ–ª—å —Å–∞–º–∞ —Ä–µ—à–∞–µ—Ç –∫–∞–∫–æ–π —Ç–∏–ø –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –Ω—É–∂–µ–Ω:

- `ask_user_choice` ‚Äî "–≤–æ—Ç 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞, –≤—ã–±–µ—Ä–∏" (wizard-—Å—Ç–∏–ª—å, —Ç–æ —á—Ç–æ —Ç—ã –æ–ø–∏—Å—ã–≤–∞–ª)
- `ask_user_input` ‚Äî "–∫–∞–∫ –Ω–∞–∑–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç?" (–æ—Ç–∫—Ä—ã—Ç—ã–π –≤–≤–æ–¥)
- `ask_user_confirm` ‚Äî "–∑–∞–ø–∏—Å–∞—Ç—å —Ñ–∞–π–ª?" (–¥–∞/–Ω–µ—Ç)

**Human-in-the-loop –Ω–∞ write_file** ‚Äî –∞–≥–µ–Ω—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–≤—å—é —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ, –∂–¥—ë—Ç `y/n/edit`. –ú–æ–∂–Ω–æ –æ–¥–æ–±—Ä–∏—Ç—å, –æ—Ç–∫–ª–æ–Ω–∏—Ç—å, –∏–ª–∏ –ø–æ–º–µ–Ω—è—Ç—å –ø—É—Ç—å.

**–î–∏–∞–ª–æ–≥ –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞** ‚Äî –∫–æ–≥–¥–∞ –∞–≥–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–º, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä –∏–ª–∏ –Ω–∞–∂–∞—Ç—å Enter –¥–ª—è –≤—ã—Ö–æ–¥–∞. –ê–≥–µ–Ω—Ç –Ω–µ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π, –∞ —Å–µ—Å—Å–∏–æ–Ω–Ω—ã–π.

## –ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è

–ú–æ–¥–µ–ª—å –Ω–µ –∑–Ω–∞–µ—Ç —á—Ç–æ —ç—Ç–∏ tool'—ã –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ. –î–ª—è –Ω–µ—ë `ask_user_choice` ‚Äî –æ–±—ã—á–Ω—ã–π tool –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª: ...". –í—Å—è –º–∞–≥–∏—è –≤ handlers ‚Äî –æ–Ω–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –∂–¥—É—Ç –≤–≤–æ–¥ —á–µ—Ä–µ–∑ `readline`. –ú–æ–¥–µ–ª—å –¥—É–º–∞–µ—Ç —á—Ç–æ –ø—Ä–æ—Å—Ç–æ –≤—ã–∑–≤–∞–ª–∞ —Ñ—É–Ω–∫—Ü–∏—é –∏ –ø–æ–ª—É—á–∏–ª–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

–†–µ–∫–æ–º–µ–Ω–¥—É—é –Ω–∞—á–∞—Ç—å —Å `project` ‚Äî —É–≤–∏–¥–∏—à—å –ø–æ–ª–Ω—ã–π wizard-flow.

