<div class="step" data-step="7" id="step-7">
            <div class="step-number">07</div>
            <div class="step-card">
                <div class="step-header">
                    <div class="step-title">Adaptive Agent ‚Äî Plan + <span class="term"
                            data-tip="–ß–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π –∏ –¥–µ–π—Å—Ç–≤–∏–π">ReAct</span> + Replan</div>
                    <span class="step-badge advanced">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</span>
                </div>
                <p class="step-intro">
                    –£—Ä–æ–∫ 6 –ø–æ–∫–∞–∑–∞–ª –¥–≤–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, –Ω–æ –æ–±–µ –±—ã–ª–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã. –ß—Ç–æ –µ—Å–ª–∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –ø–ª–∞–Ω–∞?
                    –ú—ã –¥–æ–±–∞–≤–ª—è–µ–º <code>request_replan</code> ‚Äî <strong>—Å–∏—Å—Ç–µ–º–Ω—ã–π tool</strong> (–Ω–µ skill!),
                    –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≥–µ–Ω—Ç—É –∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ. –í–∞–∂–Ω–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ: skills ‚Äî –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ
                    —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏; —Å–∏—Å—Ç–µ–º–Ω—ã–µ tools ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∞–≥–µ–Ω—Ç–∞.
                </p>

                <div class="step-content">
                    <div class="arch-diagram">
                        <div class="loop-flow">
                            <span class="loop-node llm">Plan</span>
                            <span class="loop-arrow">‚Üí</span>
                            <span class="loop-node output">ReAct Execute</span>
                            <span class="loop-arrow">‚Üí</span>
                            <span class="loop-node tool">Replan?</span>
                            <span class="loop-arrow">‚Üí</span>
                            <span class="loop-node context">Execute</span>
                            <span class="loop-arrow">‚Üí</span>
                            <span class="loop-node llm">Done</span>
                        </div>
                    </div>

                    <div class="step-detail">
                        <p>–≠—Ç–æ –∏ –µ—Å—Ç—å —Ç–æ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã. –¢—Ä–∏ —Ñ–∞–∑—ã –≤ —Ü–∏–∫–ª–µ:</p>
                        <p><strong>–§–∞–∑–∞ 1: Plan</strong> ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π LLM-–≤—ã–∑–æ–≤ –±–µ–∑ tools. –ú–æ–¥–µ–ª—å —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç
                            —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON-–ø–ª–∞–Ω,
                            –Ω–µ –∑–Ω–∞—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã.</p>
                        <p><strong>–§–∞–∑–∞ 2: ReAct Execute</strong> ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–ª–∞–Ω —Å <code>think</code> tool.
                            –ù–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –¥—É–º–∞–µ—Ç: ¬´—Å–æ–≤–ø–∞–¥–∞–µ—Ç –ª–∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å —Å –ø–ª–∞–Ω–æ–º?¬ª –ï—Å–ª–∏ –º–µ–ª–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ ‚Äî
                            –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –ª–µ—Ç—É.</p>
                        <p><strong>–§–∞–∑–∞ 3: Replan</strong> ‚Äî –µ—Å–ª–∏ –∞–≥–µ–Ω—Ç –≤—ã–∑–≤–∞–ª <code>request_replan</code>, —Ü–∏–∫–ª
                            –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—é.
                            –ù–æ —Ç–µ–ø–µ—Ä—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–Ω–∞–µ—Ç: —á—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ, —á—Ç–æ –Ω–æ–≤–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏, –ø–æ—á–µ–º—É —Å—Ç–∞—Ä—ã–π –ø–ª–∞–Ω –Ω–µ
                            –ø–æ–¥—Ö–æ–¥–∏—Ç.</p>
                    </div>

                    <div class="step-detail">
                        <h3>request_replan ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–π tool, –Ω–µ skill</h3>
                        <p>–ü–æ—á–µ–º—É <code>request_replan</code> ‚Äî –Ω–µ skill? –ü–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ <strong>–º–µ—Ö–∞–Ω–∏–∑–º agent loop</strong>,
                            –∞ –Ω–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å. Skill ‚Äî —ç—Ç–æ —Ç–æ, —á—Ç–æ –∞–≥–µ–Ω—Ç <em>—É–º–µ–µ—Ç –¥–µ–ª–∞—Ç—å</em>
                            (—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã, –∏—Å–∫–∞—Ç—å –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ, –¥—É–º–∞—Ç—å). <code>request_replan</code> ‚Äî —ç—Ç–æ —Ç–æ, –∫–∞–∫ –∞–≥–µ–Ω—Ç
                            <em>—É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–∏–º —Ä–∞–±–æ—á–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º</em>. –ï–≥–æ –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
                            –±–µ–∑ —Å–∞–º–æ–≥–æ planning loop.</p>
                        <p>–ú—ã –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ —á–µ—Ä–µ–∑ <code>extraTools</code> –≤ <code>createAgent()</code> ‚Äî –∏–º–µ–Ω–Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ
                            –º—ã —Ä–∞—Å—à–∏—Ä—è–ª–∏ options –≤ skill-utils.</p>
                    </div>

                    <div class="code-block">
                        <div class="code-filename"><span class="dot"></span>–°–∏—Å—Ç–µ–º–Ω—ã–π tool vs Skill</div>
                        <pre><span class="cm">// Skill ‚Äî –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å:</span>
<span class="cm">//   skills/reasoning/SKILL.md ‚Üí think tool</span>
<span class="cm">//   skills/bash/SKILL.md      ‚Üí run_bash tool</span>
<span class="cm">//   –õ—é–±–æ–π –∞–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –∏—Ö –ø–æ–¥–∫–ª—é—á–∏—Ç—å</span>

<span class="cm">// –°–∏—Å—Ç–µ–º–Ω—ã–π tool ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:</span>
<span class="cm">//   request_replan ‚Üí —É–ø—Ä–∞–≤–ª—è–µ—Ç planning loop</span>
<span class="cm">//   –°—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ createPlanningAgent()</span>

<span class="cm">// –î–æ–±–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ extraTools, –Ω–µ —á–µ—Ä–µ–∑ SKILL.md</span>
<span class="kw">const</span> agent = <span class="fn">createAgent</span>(skills, {
    <span class="prop">extraTools</span>: [replanTool],
    <span class="prop">extraHandlers</span>: { <span class="prop">request_replan</span>: () =&gt; <span class="str">"REPLAN_REQUESTED"</span> },
});</pre>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>

                    <div class="step-detail">
                        <h3>Skills –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —É—Ä–æ–∫–æ–≤</h3>
                        <p>–ù–æ–≤—ã—Ö SKILL.md —Ñ–∞–π–ª–æ–≤ –Ω–µ—Ç ‚Äî –º—ã –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ –∂–µ skills –∏–∑ —É—Ä–æ–∫–æ–≤ 5 –∏ 6:
                            <code>filesystem</code>, <code>bash</code>, <code>reasoning</code>.
                            –í—Å—è –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ ‚Äî –≤ agent loop –∏ system prompt.</p>
                    </div>

                    <div class="code-block">
                        <div class="code-filename"><span class="dot"></span>src/07-adaptive-agent.ts</div>
                        <pre>// src/07-adaptive-agent.ts ‚Äî Adaptive: Plan + ReAct + Replan
import OpenAI from "openai";
import {
    discoverSkills, activateSkill, createAgent,
    createFilesystemSkill, createBashSkill, createReasoningSkill,
    Skill
} from "./skill-utils";

import dotenv from "dotenv";
dotenv.config();

const client = new OpenAI({
    baseURL: "https://openrouter.ai/api/v1",
    apiKey: process.env.OPENROUTER_API_KEY ?? "",
});
const MODEL = "anthropic/claude-sonnet-4.5";

// === request_replan ‚Äî –°–ò–°–¢–ï–ú–ù–´–ô tool, –Ω–µ skill ===
const replanTool: OpenAI.ChatCompletionTool = {
    type: "function",
    function: {
        name: "request_replan",
        description:
            "–í—ã–∑–æ–≤–∏ –∫–æ–≥–¥–∞ –ø–ª–∞–Ω –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å: –Ω–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, " +
            "–ø—Ä–æ–≤–∞–ª —à–∞–≥–∞, –∏–ª–∏ –ª—É—á—à–∏–π –ø—É—Ç—å –∫ —Ü–µ–ª–∏.",
        parameters: {
            type: "object",
            properties: {
                reason: { type: "string", description: "–ü–æ—á–µ–º—É –Ω—É–∂–µ–Ω –Ω–æ–≤—ã–π –ø–ª–∞–Ω" },
                completed_steps: {
                    type: "array", items: { type: "string" },
                    description: "–ö–∞–∫–∏–µ —à–∞–≥–∏ —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã",
                },
                discoveries: {
                    type: "array", items: { type: "string" },
                    description: "–ß—Ç–æ –Ω–æ–≤–æ–≥–æ —É–∑–Ω–∞–ª–∏",
                },
            },
            required: ["reason", "completed_steps", "discoveries"],
        },
    },
};

// === –ó–∞–≥—Ä—É–∑–∫–∞ skills (—Ç–µ –∂–µ —á—Ç–æ –≤ —É—Ä–æ–∫–µ 6) ===
function loadSkills(): Skill[] {
    const discovered = discoverSkills("./skills");
    console.log("\nüîå Activation:");
    const skills: Skill[] = [];
    for (const d of discovered) {
        const meta = activateSkill(d.location);
        switch (meta.name) {
            case "filesystem": skills.push(createFilesystemSkill(meta)); break;
            case "bash":       skills.push(createBashSkill(meta)); break;
            case "reasoning":  skills.push(createReasoningSkill(meta)); break;
        }
    }
    console.log(`\nüöÄ ${skills.length} skills: ${skills.map(s =&gt; s.name).join(", ")}`);
    return skills;
}

// === –§–ê–ó–ê 1: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ===
interface Plan {
    goal: string;
    steps: { id: number; action: string; tool: string; reason: string }[];
}

async function createPlan(
    task: string,
    context?: { previousPlan?: Plan; completedSteps?: string[]; discoveries?: string[] }
): Promise&lt;Plan&gt; {
    let systemPrompt = `–¢—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫. –°–æ—Å—Ç–∞–≤—å –ø–ª–∞–Ω.
–î–æ—Å—Ç—É–ø–Ω—ã–µ tools: run_bash, read_file, write_file, list_dir, think.
–û—Ç–≤–µ—Ç—å –¢–û–õ–¨–ö–û –≤–∞–ª–∏–¥–Ω—ã–º JSON:
{ "goal": "—Ü–µ–ª—å", "steps": [{ "id": 1, "action": "...", "tool": "...", "reason": "..." }] }`;

    if (context?.previousPlan) {
        systemPrompt += `\n\n–ö–û–ù–¢–ï–ö–°–¢ –†–ï–ü–õ–ê–ù–ê:
–ü—Ä–µ–¥—ã–¥—É—â–∏–π –ø–ª–∞–Ω: ${JSON.stringify(context.previousPlan)}
–£–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ: ${context.completedSteps?.join(", ") || "–Ω–∏—á–µ–≥–æ"}
–ù–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ: ${context.discoveries?.join("; ") || "–Ω–µ—Ç"}
–£—á—Ç–∏ —á—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ, –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–π –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —à–∞–≥–∏.`;
    }

    const response = await client.chat.completions.create({
        model: MODEL,
        messages: [
            { role: "system", content: systemPrompt },
            { role: "user", content: task },
        ],
    });

    const text = response.choices[0].message.content ?? "";
    return JSON.parse(text.replace(/```json\n?/g, "").replace(/```\n?/g, "").trim());
}

// === –§–ê–ó–ê 2: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å ReAct + replan ===
interface ExecutionResult {
    status: "completed" | "replan_requested";
    replanContext?: { reason: string; completedSteps: string[]; discoveries: string[] };
}

async function executeWithReact(skills: Skill[], task: string, plan: Plan): Promise&lt;ExecutionResult&gt; {
    // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π handler –¥–ª—è request_replan
    let replanData: ExecutionResult["replanContext"] | null = null;

    const agent = createAgent(skills, {
        systemPrompt: `–¢—ã –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å —Å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–º –º—ã—à–ª–µ–Ω–∏–µ–º.

–¢–í–û–ô –ü–õ–ê–ù:
${JSON.stringify(plan, null, 2)}

–ú–ï–¢–û–î: think ‚Üí act ‚Üí think ‚Üí act.
–ï—Å–ª–∏ –ø–ª–∞–Ω –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å ‚Äî –≤—ã–∑–æ–≤–∏ request_replan.
–ù–ï –≤—ã–∑—ã–≤–∞–π replan –¥–ª—è –º–µ–ª–æ—á–µ–π ‚Äî –∞–¥–∞–ø—Ç–∏—Ä—É–π—Å—è –Ω–∞ –ª–µ—Ç—É.

&lt;available_skills&gt;
{{SKILLS}}
&lt;/available_skills&gt;`,
        maxIterations: 20,
        extraTools: [replanTool],
        extraHandlers: {
            request_replan: (args: any) =&gt; {
                replanData = {
                    reason: args.reason,
                    completedSteps: args.completed_steps,
                    discoveries: args.discoveries,
                };
                console.log(`\n  üîÑ –†–ï–ü–õ–ê–ù: ${args.reason}`);
                return "REPLAN_REQUESTED";
            },
        },
    });

    await agent(task);

    if (replanData) {
        return { status: "replan_requested", replanContext: replanData };
    }
    return { status: "completed" };
}

// === –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª: Plan ‚Üí Execute ‚Üí Replan? ===
async function adaptiveAgent(task: string) {
    console.log("‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó");
    console.log("‚ïë   ADAPTIVE AGENT: Plan + ReAct + Replan      ‚ïë");
    console.log("‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù");
    console.log(`\nüìå –ó–∞–¥–∞—á–∞: ${task}\n`);

    const skills = loadSkills();

    let plan = await createPlan(task);
    console.log(`\nüìã –ü–õ–ê–ù: ${plan.goal}`);
    plan.steps.forEach(s =&gt; console.log(`  ${s.id}. [${s.tool}] ${s.action}`));

    const MAX_REPLANS = 3;
    let replanCount = 0;

    while (replanCount &lt;= MAX_REPLANS) {
        console.log(`\n‚ö° –í–´–ü–û–õ–ù–ï–ù–ò–ï (–ø–ª–∞–Ω v${replanCount + 1})\n`);
        const result = await executeWithReact(skills, task, plan);

        if (result.status === "completed") {
            console.log("\nüéâ –ê–≥–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–∏–ª –∑–∞–¥–∞—á—É.");
            return;
        }

        replanCount++;
        if (replanCount &gt; MAX_REPLANS) {
            console.log("\n‚ö†Ô∏è  –õ–∏–º–∏—Ç —Ä–µ–ø–ª–∞–Ω–æ–≤. –ó–∞–≤–µ—Ä—à–∞–µ–º.");
            return;
        }

        console.log(`\nüìã –†–ï–ü–õ–ê–ù #${replanCount}...`);
        plan = await createPlan(task, {
            previousPlan: plan,
            completedSteps: result.replanContext?.completedSteps,
            discoveries: result.replanContext?.discoveries,
        });
        console.log(`üîÑ –ù–û–í–´–ô –ü–õ–ê–ù: ${plan.goal}`);
        plan.steps.forEach(s =&gt; console.log(`  ${s.id}. [${s.tool}] ${s.action}`));
    }
}

// === –ó–∞–ø—É—Å–∫ ===
const task = process.argv[2] ||
    "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –≤—Å–µ .ts —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ src/. " +
    "–ù–∞–π–¥–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏. " +
    "–°–æ–∑–¥–∞–π —Ñ–∞–π–ª REFACTORING.md —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏.";

adaptiveAgent(task);</pre>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>

                    <div class="run-command">
                        <span class="run-icon">‚ñ∂</span>
                        <code>npx tsx src/07-adaptive-agent.ts</code>
                    </div>

                    <button class="demo-btn" data-demo="demo-step-7">‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–º–æ</button>

                    <div class="demo-output demo-player" id="demo-step-7" data-demo-chat="step7" aria-live="polite">
                        <div class="demo-player-header">
                            <div class="demo-player-title">–î–µ–º–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –¥–∏–∞–ª–æ–≥–∞</div>
                            <div class="demo-player-count"><span data-demo-index>1</span>/<span data-demo-total>1</span>
                            </div>
                        </div>
                        <div class="demo-chat-body" data-demo-chat-body></div>
                        <div class="demo-player-controls">
                            <button class="demo-step-btn" data-demo-prev>‚Üê –ù–∞–∑–∞–¥</button>
                            <div class="demo-step-label" data-demo-label></div>
                            <button class="demo-step-btn" data-demo-next>–î–∞–ª–µ–µ ‚Üí</button>
                        </div>
                    </div>
                    <div class="output-note" data-demo-note="demo-step-7">–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞. –£ —Ç–µ–±—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω–∞—á–µ ‚Äî —ç—Ç–æ
                        –Ω–æ—Ä–º–∞–ª—å–Ω–æ.</div>

                    <div class="mini-block expect">
                        <div class="mini-title">‚úÖ –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è</div>
                        –í–∏–¥–Ω–æ —Ç—Ä–∏ —Ñ–∞–∑—ã: Discovery/Activation skills, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ—à–∞–≥–æ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.
                        –ê–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–µ–ø–ª–∞–Ω, –Ω–æ –Ω–µ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–µ—Ç—Å—è (–ª–∏–º–∏—Ç MAX_REPLANS=3).
                    </div>

                    <div class="mini-block trouble">
                        <div class="mini-title">üßØ –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç</div>
                        –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ <code>request_replan</code> –ø–µ—Ä–µ–¥–∞–Ω —á–µ—Ä–µ–∑ <code>extraTools</code>
                        –∏ —á—Ç–æ <code>extraHandlers</code> —Å–æ–¥–µ—Ä–∂–∏—Ç –µ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫.
                    </div>

                    <div class="key-insight">
                        <strong>üí° Skill vs —Å–∏—Å—Ç–µ–º–Ω—ã–π tool ‚Äî –Ω–µ –≤—Å—ë –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å skill'–æ–º.</strong>
                        Skills ‚Äî –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (<code>filesystem</code>, <code>bash</code>,
                        <code>reasoning</code>).
                        –°–∏—Å—Ç–µ–º–Ω—ã–µ tools ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (<code>request_replan</code>).
                        –†–∞–∑–Ω–∏—Ü–∞: skill –∂–∏–≤—ë—Ç –≤ <code>SKILL.md</code> –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ª—é–±–æ–º –∞–≥–µ–Ω—Ç–µ.
                        –°–∏—Å—Ç–µ–º–Ω—ã–π tool —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ agent loop.
                        <br><br>
                        <strong>Adaptive replanning:</strong> –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–∏ —Ä–µ–ø–ª–∞–Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç ‚Äî
                        —á—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ, —á—Ç–æ –Ω–æ–≤–æ–≥–æ —É–∑–Ω–∞–ª–∏, –ø–æ—á–µ–º—É —Å—Ç–∞—Ä—ã–π –ø–ª–∞–Ω –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç.
                        –≠—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –æ—Ç —Ç—É–ø–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è.
                        <br><br>
                        <code>extraTools</code> –≤ <code>createAgent()</code> ‚Äî —Ç–æ—á–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è.
                        –ú—ã –Ω–µ –º–µ–Ω—è–ª–∏ skill-utils.ts ‚Äî –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞–ª–∏ —Å–∏—Å—Ç–µ–º–Ω—ã–π tool —á–µ—Ä–µ–∑ options.
                    </div>
                </div>
            </div>
        </div>

<!-- –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ —É—Ä–æ–∫–∞ -->
<script type="application/json" data-demo-steps="step7">
[
    {
        "label": "Skills + –ü–ª–∞–Ω",
        "messages": [
            {
                "role": "tool_result",
                "text": "üìã Discovery: –Ω–∞–π–¥–µ–Ω–æ 4 skill(s)\n  ‚Ä¢ bash: Execute shell commands...\n  ‚Ä¢ filesystem: Read, write, and list files...\n  ‚Ä¢ reasoning: Internal scratchpad for thinking...\n  ‚Ä¢ web-search: Search the web...\n\nüîå Activation:\n  ‚úÖ filesystem activated (384 chars)\n  ‚úÖ bash activated (267 chars)\n  ‚úÖ reasoning activated (412 chars)\n\nüöÄ 3 skills: filesystem, bash, reasoning"
            },
            {
                "role": "llm",
                "text": "üìã –ü–õ–ê–ù: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å .ts —Ñ–∞–π–ª—ã, –Ω–∞–π—Ç–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–æ–∑–¥–∞—Ç—å REFACTORING.md\n  1. [run_bash] –ù–∞–π—Ç–∏ –≤—Å–µ .ts —Ñ–∞–π–ª—ã\n  2. [read_file] –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞\n  3. [run_bash] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç—ã\n  4. [run_bash] –ù–∞–π—Ç–∏ –ø–æ—Ö–æ–∂–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã\n  5. [write_file] –°–æ–∑–¥–∞—Ç—å REFACTORING.md"
            }
        ]
    },
    {
        "label": "–°–±–æ—Ä —Ñ–∞–π–ª–æ–≤",
        "messages": [
            {
                "role": "tool_call",
                "text": "run_bash({\"command\":\"find src/ -name \\\"*.ts\\\" -type f | sort\"})"
            },
            {
                "role": "tool_result",
                "text": "src/01-basic-call.ts\nsrc/02-with-tool.ts\nsrc/03-agent-loop.ts\nsrc/04-real-tools.ts\nsrc/05-skills.ts\nsrc/06-planning.ts\nsrc/07-adaptive-agent.ts\nsrc/skill-utils.ts"
            },
            {
                "role": "tool_call",
                "text": "read_file({\"path\":\"src/01-basic-call.ts\"})"
            },
            {
                "role": "tool_result",
                "text": "// src/01-basic-call.ts\nimport OpenAI from \"openai\";\nimport dotenv from \"dotenv\";\n..."
            }
        ]
    },
    {
        "label": "–ê–Ω–∞–ª–∏–∑",
        "messages": [
            {
                "role": "tool_call",
                "text": "think({\"thought\":\"–Ø –ø—Ä–æ—á–∏—Ç–∞–ª —Ñ–∞–π–ª—ã 01-04. –í—Å–µ –æ–Ω–∏ –¥—É–±–ª–∏—Ä—É—é—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é OpenAI –∫–ª–∏–µ–Ω—Ç–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è tools. –§–∞–π–ª—ã 06-07 —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç skill-utils.ts ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥. –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∞—Å—à—Ç–∞–± –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.\"})"
            },
            {
                "role": "tool_call",
                "text": "run_bash({\"command\":\"grep -h \\\"^import\\\" src/*.ts | sort | uniq -c | sort -rn | head -10\"})"
            },
            {
                "role": "tool_result",
                "text": "      8 import dotenv from \"dotenv\";\n      8 import OpenAI from \"openai\";\n      5 import { execSync } from \"child_process\";\n      4 import { readFileSync, writeFileSync } from \"fs\";"
            }
        ]
    },
    {
        "label": "–ó–∞–ø–∏—Å—å –æ—Ç—á—ë—Ç–∞",
        "messages": [
            {
                "role": "tool_call",
                "text": "write_file({path: \"REFACTORING.md\", content: [14820 chars]})"
            },
            {
                "role": "tool_result",
                "text": "–§–∞–π–ª REFACTORING.md –∑–∞–ø–∏—Å–∞–Ω"
            }
        ]
    },
    {
        "label": "–ò—Ç–æ–≥",
        "messages": [
            {
                "role": "llm",
                "text": "üéâ –ê–≥–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–∏–ª –∑–∞–¥–∞—á—É.\n\n**–ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Ö–æ–¥–∫–∏:**\n- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è OpenAI –∫–ª–∏–µ–Ω—Ç–∞ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤ 8 —Ñ–∞–π–ª–∞—Ö\n- Tool definitions –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª–∞—Ö 04‚Äì06\n- –§–∞–π–ª—ã 06‚Äì07 —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç skill-utils.ts ‚Äî –≤–µ—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω\n\n**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** —Ñ–∞–π–ª—ã 01‚Äì05 ‚Äî —É—á–µ–±–Ω—ã–µ, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–ø—É—Å—Ç–∏–º–æ –¥–ª—è –ø–æ—à–∞–≥–æ–≤–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è. –§–∞–π–ª—ã 06+ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç shared –º–æ–¥—É–ª—å.\n\n–û—Ç—á—ë—Ç –∑–∞–ø–∏—Å–∞–Ω –≤ REFACTORING.md.\n\n(request_replan –Ω–µ –ø–æ–Ω–∞–¥–æ–±–∏–ª—Å—è ‚Äî –ø–ª–∞–Ω —Å–æ–≤–ø–∞–ª —Å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é)"
            }
        ]
    }
]
</script>
