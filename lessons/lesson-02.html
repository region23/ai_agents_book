<div class="step" data-step="2" id="step-2">
            <div class="step-number">02</div>
            <div class="step-card">
                <div class="step-header">
                    <div class="step-title">–î–æ–±–∞–≤–ª—è–µ–º –ø–µ—Ä–≤—ã–π Tool</div>
                    <span class="step-badge beginner">–ù–∞—á–∞–ª–æ</span>
                </div>
                <p class="step-intro">
                    –î–∞—ë–º –º–æ–¥–µ–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å ¬´–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å¬ª ‚Äî –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ (<span class="term"
                        data-tip="–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç/—Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –≤—ã–∑—ã–≤–∞–µ—Ç –º–æ–¥–µ–ª—å">tool</span>). –ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç: –º–æ–¥–µ–ª—å –Ω–µ
                    –≤—ã–¥—É–º—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –∞ –ø—Ä–æ—Å–∏—Ç –Ω–∞—Å –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é.
                </p>

                <div class="step-content">
                    <div class="step-detail">
                        <p>
                            –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ LLM API —É–∂–µ –∏–º–µ—é—Ç <strong>–Ω–∞—Ç–∏–≤–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É tools</strong> ‚Äî —Ç—ã –æ–ø–∏—Å—ã–≤–∞–µ—à—å
                            tools –≤ –∑–∞–ø—Ä–æ—Å–µ —á–µ—Ä–µ–∑ JSON Schema,
                            –∏ –º–æ–¥–µ–ª—å —Å–∞–º–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç <code>tool_calls</code> –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ.
                            –ù–µ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å–∏—Ç—å ¬´–≤–µ—Ä–Ω–∏ JSON¬ª ‚Äî —ç—Ç–æ —É–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª.
                        </p>
                        <p>
                            –ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç: <strong>–º–æ–¥–µ–ª—å —Ä–µ—à–∞–µ—Ç —Å–∞–º–∞</strong> ‚Äî –≤—ã–∑–≤–∞—Ç—å tool –∏–ª–∏ –æ—Ç–≤–µ—Ç–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–º.
                            –¢—ã –Ω–µ –ø–∏—à–µ—à—å <code>if/else</code> ‚Äî –º–æ–¥–µ–ª—å –≤–∏–¥–∏—Ç –æ–ø–∏—Å–∞–Ω–∏–µ tools –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞,
                            –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –∑–∞ —Ç–µ–±—è.
                        </p>
                    </div>

                    <div class="code-block">
                        <div class="code-filename"><span class="dot"></span>src/02-with-tool.ts</div>
                        <pre>// src/02-with-tool.ts
import OpenAI from "openai";
import dotenv from "dotenv";

dotenv.config();

const client = new OpenAI({
    baseURL: "https://openrouter.ai/api/v1",
    apiKey: process.env.OPENROUTER_API_KEY ?? "",
});

// 1. –û–ø–∏—Å—ã–≤–∞–µ–º tools ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ JSON Schema
const tools: OpenAI.ChatCompletionTool[] = [
    {
        type: "function",
        function: {
            name: "get_weather",
            description: "–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–≥–æ–¥—É –≤ –≥–æ—Ä–æ–¥–µ",
            parameters: {
                type: "object",
                properties: {
                    city: {
                        type: "string",
                        description: "–ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞",
                    },
                },
                required: ["city"],
            },
        },
    },
];

// 2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è tool ‚Äî –æ–±—ã—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
function get_weather(city: string): string {
    // –ü–æ–∫–∞ —Ñ–µ–π–∫–æ–≤–∞—è, –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ —Ä–µ–∞–ª—å–Ω—ã–π API
    const data: Record&lt;string, string&gt; = {
        "–ú–æ—Å–∫–≤–∞": "‚àí5¬∞C, —Å–Ω–µ–≥",
        "–ê–Ω–∞–ø–∞": "+8¬∞C, –æ–±–ª–∞—á–Ω–æ",
        "–õ–æ–Ω–¥–æ–Ω": "+3¬∞C, –¥–æ–∂–¥—å",
    };
    return data[city] ?? `–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥–æ—Ä–æ–¥–∞ ${city}`;
}

async function main() {
    const response = await client.chat.completions.create({
        model: "anthropic/claude-sonnet-4.5",
        messages: [
            { role: "user", content: "–ö–∞–∫–∞—è –ø–æ–≥–æ–¥–∞ –≤ –ê–Ω–∞–ø–µ?" },
        ],
        tools,
    });

    const message = response.choices[0].message;

    // 3. –°–º–æ—Ç—Ä–∏–º —á—Ç–æ –≤–µ—Ä–Ω—É–ª–∞ –º–æ–¥–µ–ª—å
    console.log("=== –û—Ç–≤–µ—Ç –º–æ–¥–µ–ª–∏ ===");
    console.log("Content:", message.content);
    console.log("Tool calls:", JSON.stringify(message.tool_calls, null, 2));
}

main();
</pre>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>

                    <div class="step-detail">
                        <p>–ü–æ–¥—Å–∫–∞–∑–∫–∞: –µ—Å–ª–∏ —É–±—Ä–∞—Ç—å <code>tool_choice</code>, –º–æ–¥–µ–ª—å –±—É–¥–µ—Ç —Ä–µ—à–∞—Ç—å —Å–∞–º–∞ ‚Äî —Ç–∞–∫ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–µ–µ,
                            –Ω–æ –¥–µ–º–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–º.</p>
                    </div>

                    <div class="run-command">
                        <span class="run-icon">‚ñ∂</span>
                        <code>npx tsx src/02-with-tool.ts</code>
                    </div>

                    <button class="demo-btn" data-demo="demo-step-2">‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–º–æ</button>

                    <div class="demo-output demo-player" id="demo-step-2" data-demo-chat="step2" aria-live="polite">
                        <div class="demo-player-header">
                            <div class="demo-player-title">–î–µ–º–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –¥–∏–∞–ª–æ–≥–∞</div>
                            <div class="demo-player-count"><span data-demo-index>1</span>/<span data-demo-total>1</span>
                            </div>
                        </div>
                        <div class="demo-chat-body" data-demo-chat-body></div>
                        <div class="demo-player-controls">
                            <button class="demo-step-btn" data-demo-prev>‚Üê –ù–∞–∑–∞–¥</button>
                            <div class="demo-step-label" data-demo-label></div>
                            <button class="demo-step-btn" data-demo-next>–î–∞–ª–µ–µ ‚Üí</button>
                        </div>
                    </div>
                    <div class="output-note" data-demo-note="demo-step-2">–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞. –£ —Ç–µ–±—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω–∞—á–µ ‚Äî —ç—Ç–æ
                        –Ω–æ—Ä–º–∞–ª—å–Ω–æ.</div>

                    <div class="mini-block expect">
                        <div class="mini-title">‚úÖ –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è</div>
                        –í –≤—ã–≤–æ–¥–µ –≤–∏–¥–Ω–æ <code>tool_calls</code> —Å –≤—ã–∑–æ–≤–æ–º <code>get_weather</code> –∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º
                        <code>city</code>.
                    </div>

                    <div class="mini-block trouble">
                        <div class="mini-title">üßØ –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç</div>
                        –ï—Å–ª–∏ <code>tool_calls</code> –ø—É—Å—Ç–æ–π ‚Äî –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –µ—Å—Ç—å <code>tool_choice</code>, –∏–ª–∏ —É–∫–∞–∂–∏ –≤
                        –ø—Ä–æ–º–ø—Ç–µ ¬´–≤—ã–∑–æ–≤–∏ get_weather¬ª.
                    </div>

                    <div class="key-insight">
                        <strong>üí° –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ:</strong> Content –ø—É—Å—Ç–æ–π! –ú–æ–¥–µ–ª—å –Ω–µ —Å—Ç–∞–ª–∞ –≤—ã–¥—É–º—ã–≤–∞—Ç—å –ø–æ–≥–æ–¥—É.
                        –û–Ω–∞ –≤–µ—Ä–Ω—É–ª–∞ <code>tool_calls</code> —Å –∏–º–µ–Ω–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏ ‚Äî –ø–æ–ø—Ä–æ—Å–∏–ª–∞ <em>–Ω–∞—Å</em>
                        –≤—ã–ø–æ–ª–Ω–∏—Ç—å <code>get_weather</code>.
                        –í–æ—Ç —ç—Ç–æ –∏ –µ—Å—Ç—å structured output ‚Äî –Ω–∞—Ç–∏–≤–Ω—ã–π, –Ω–µ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å–∏—Ç—å ¬´–≤–µ—Ä–Ω–∏ JSON¬ª.
                    </div>
                </div>
            </div>
        </div>

<!-- –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ —É—Ä–æ–∫–∞ -->
<script type="application/json" data-demo-steps="step2">
[
    {
        "label": "Tool call",
        "messages": [
            {
                "role": "user",
                "text": "–ö–∞–∫–∞—è –ø–æ–≥–æ–¥–∞ –≤ –ê–Ω–∞–ø–µ?"
            },
            {
                "role": "tool_call",
                "text": "get_weather({\"city\": \"–ê–Ω–∞–ø–∞\"})"
            },
            {
                "role": "tool_result",
                "text": "+8¬∞C, –æ–±–ª–∞—á–Ω–æ"
            }
        ]
    },
    {
        "label": "–û—Ç–≤–µ—Ç",
        "messages": [
            {
                "role": "llm",
                "text": "–°–µ–π—á–∞—Å –≤ –ê–Ω–∞–ø–µ +8¬∞C, –æ–±–ª–∞—á–Ω–æ ‚òÅÔ∏è"
            }
        ]
    }
]
</script>
