<div class="step" data-step="8" id="step-8">
            <div class="step-number">08</div>
            <div class="step-card">
                <div class="step-header">
                    <div class="step-title"><span class="term"
                            data-tip="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –ø—Ä–∏–Ω—è—Ç–∏–∏ —Ä–µ—à–µ–Ω–∏–π">Human-in-the-Loop</span> + <span
                            class="term" data-tip="–ü–æ—à–∞–≥–æ–≤—ã–π –º–∞—Å—Ç–µ—Ä/–≤–∏–∑–∞—Ä–¥">Wizard</span></div>
                    <span class="step-badge advanced">–§–∏–Ω–∞–ª</span>
                </div>
                <p class="step-intro">
                    –£ –Ω–∞—Å –µ—Å—Ç—å skills –¥–ª—è —Ñ–∞–π–ª–æ–≤, bash –∏ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π. –¢–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–ª—è–µ–º –µ—â—ë –æ–¥–∏–Ω:
                    <code>interaction</code> ‚Äî —Ç—Ä–∏ tool'–∞ –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.
                    –î–æ–±–∞–≤–∏—Ç—å human-in-the-loop = –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë –æ–¥–∏–Ω skill. Agent loop –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è.
                </p>

                <div class="step-content">
                    <div class="step-detail">
                        <p>–î–≤–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –≤ –æ–¥–Ω–æ–º:</p>
                        <p>
                            <strong>Human-in-the-loop</strong> ‚Äî –∞–≥–µ–Ω—Ç –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥
                            –æ–ø–∞—Å–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏ (–∑–∞–ø–∏—Å—å —Ñ–∞–π–ª–æ–≤).
                        </p>
                        <p>
                            <strong><span class="term" data-tip="–ü–æ—à–∞–≥–æ–≤—ã–π –º–∞—Å—Ç–µ—Ä/–≤–∏–∑–∞—Ä–¥">Wizard/Guide</span></strong> ‚Äî
                            –∞–≥–µ–Ω—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã, –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤—ã–±–æ—Ä, –∏ —Ç–∞–∫ –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤.
                        </p>
                    </div>

                    <div class="code-block">
                        <div class="code-filename"><span class="dot"></span>–¢—Ä–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö tool'–∞</div>
                        <pre><span class="cm">// –ú–æ–¥–µ–ª—å —Å–∞–º–∞ —Ä–µ—à–∞–µ—Ç –∫–∞–∫–æ–π —Ç–∏–ø –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –Ω—É–∂–µ–Ω:</span>

<span class="cm">// 1. –í—ã–±–æ—Ä –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (wizard-—Å—Ç–∏–ª—å)</span>
{
    <span class="prop">name</span>: <span class="str">"ask_user_choice"</span>,
    <span class="prop">description</span>: <span class="str">"–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤—ã–±–æ—Ä –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤"</span>,
    <span class="prop">parameters</span>: {
        <span class="prop">question</span>: <span class="str">"–û–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏"</span>,
        <span class="prop">options</span>: [
            { <span class="prop">label</span>: <span class="str">"–í–∞—Ä–∏–∞–Ω—Ç A"</span>, <span class="prop">description</span>: <span class="str">"–ü–ª—é—Å—ã, –º–∏–Ω—É—Å—ã"</span> },
            { <span class="prop">label</span>: <span class="str">"–í–∞—Ä–∏–∞–Ω—Ç B"</span>, <span class="prop">description</span>: <span class="str">"–ü–ª—é—Å—ã, –º–∏–Ω—É—Å—ã"</span> },
        ],
        <span class="prop">allow_custom</span>: <span class="num">true</span>
    }
}

<span class="cm">// 2. –¢–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥</span>
{ <span class="prop">name</span>: <span class="str">"ask_user_input"</span> }    <span class="cm">// "–ö–∞–∫ –Ω–∞–∑–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç?"</span>

<span class="cm">// 3. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–∞/–Ω–µ—Ç</span>
{ <span class="prop">name</span>: <span class="str">"ask_user_confirm"</span> }  <span class="cm">// "–ó–∞–ø–∏—Å–∞—Ç—å —Ñ–∞–π–ª?"</span></pre>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>

                    <div class="step-detail">
                        <h3>–®–∞–≥ 1. –°–æ–∑–¥–∞—ë–º interaction skill</h3>
                        <p>–¢—Ä–∏ tool'–∞ –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º ‚Äî —ç—Ç–æ <strong>skill</strong>, —Ç–∞–∫–æ–π –∂–µ –∫–∞–∫ filesystem –∏–ª–∏ bash.
                            –ú–æ–¥–µ–ª—å –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ tools –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ. –î–ª—è –Ω–µ—ë <code>ask_user_choice</code> ‚Äî –æ–±—ã—á–Ω—ã–π tool,
                            –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É <code>"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª: ..."</code>. –í—Å—è –º–∞–≥–∏—è –≤ handlers.</p>
                    </div>

                    <div class="code-block">
                        <div class="code-filename"><span class="dot"></span>–°–æ–∑–¥–∞—ë–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É</div>
                        <pre>mkdir -p skills/interaction</pre>
                    </div>

                    <div class="code-block">
                        <div class="code-filename"><span class="dot"></span>skills/interaction/SKILL.md</div>
                        <pre>---
name: interaction
description: Ask the user questions, offer choices, and request confirmations. Use when the agent needs human input or approval.
metadata:
  author: ai-agents-book
  version: "1.0"
---

# Interaction Skill

–¢—ã –º–æ–∂–µ—à—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º: –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã,
–ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã, –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- **ask_user_choice** ‚Äî –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≤—ã–±–æ—Ä –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- **ask_user_input** ‚Äî –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥
- **ask_user_confirm** ‚Äî –∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–∞/–Ω–µ—Ç

## –ü—Ä–∞–≤–∏–ª–∞
- –ü—Ä–µ–¥–ª–∞–≥–∞–π 2-4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ –ø–ª—é—Å–æ–≤ –∏ –º–∏–Ω—É—Å–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π ask_user_confirm –ø–µ—Ä–µ–¥ –Ω–µ–æ–±—Ä–∞—Ç–∏–º—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏
- –ù–µ –¥–µ–ª–∞–π –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π ‚Äî —Å–ø—Ä–∞—à–∏–≤–∞–π
- –†–∞–∑–±–∏–≤–∞–π —Å–ª–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –Ω–∞ —à–∞–≥–∏ (wizard-–ø–∞—Ç—Ç–µ—Ä–Ω)</pre>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>

                    <div class="step-detail">
                        <h3>Async handlers ‚Äî –∫–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç</h3>
                        <p>Handlers –¥–ª—è interaction skill ‚Äî <strong>–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ</strong>. –û–Ω–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
                            –∏ –∂–¥—É—Ç –≤–≤–æ–¥ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ <code>readline</code>. –ù–∞—à <code>createAgent()</code>
                            –∏–∑ skill-utils —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç async handlers (–ø–æ–º–Ω–∏—à—å <code>Promise&lt;string&gt;</code>
                            –≤ —Ç–∏–ø–µ?). –ü–æ—ç—Ç–æ–º—É agent loop –Ω–µ –Ω–∞–¥–æ –º–µ–Ω—è—Ç—å ‚Äî –æ–Ω –ø—Ä–æ—Å—Ç–æ <code>await</code>'–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.</p>
                    </div>

                    <div class="step-detail">
                        <h3>wrapWithConfirmation ‚Äî –ø–∞—Ç—Ç–µ—Ä–Ω –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏</h3>
                        <p>Human-in-the-loop –¥–ª—è <code>write_file</code> ‚Äî —ç—Ç–æ –æ–±—ë—Ä—Ç–∫–∞ –ø–æ–≤–µ—Ä—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ handler'–∞.
                            –ë–µ—Ä—ë–º filesystem skill, –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º –µ–≥–æ <code>write_file</code> handler:
                            —Å–Ω–∞—á–∞–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–≤—å—é + —Å–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –ø–æ—Ç–æ–º –≤—ã–∑—ã–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π handler.
                            Skill –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è ‚Äî –º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ handler.</p>
                    </div>

                    <div class="code-block">
                        <div class="code-filename"><span class="dot"></span>src/08-interactive-agent.ts</div>
                        <pre>// src/08-interactive-agent.ts ‚Äî Human-in-the-loop + Wizard
import {
    discoverSkills, activateSkill, createAgent,
    createFilesystemSkill, createBashSkill, createReasoningSkill,
    createInteractionSkill, Skill,
} from "./skill-utils";

import * as readline from "readline";

// === –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –≤–≤–æ–¥–∞ ===
const rl = readline.createInterface({ input: process.stdin, output: process.stdout });
const ask = (q: string): Promise&lt;string&gt; =&gt;
    new Promise(resolve =&gt; rl.question(q, answer =&gt; resolve(answer.trim())));

// === wrapWithConfirmation: –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è human-in-the-loop ===
function wrapWithConfirmation(skill: Skill, toolName: string): Skill {
    const originalHandler = skill.handlers[toolName];
    return {
        ...skill,
        handlers: {
            ...skill.handlers,
            [toolName]: async (args: any) =&gt; {
                console.log("\n" + "‚ïê".repeat(50));
                console.log(`‚ö†Ô∏è  –ê–≥–µ–Ω—Ç —Ö–æ—á–µ—Ç: ${toolName}(${JSON.stringify(args).slice(0, 80)})`);

                // –ü—Ä–µ–≤—å—é —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–ª—è write_file
                if (args.content) {
                    console.log("‚îÄ".repeat(50));
                    const lines = args.content.split("\n");
                    console.log(lines.slice(0, 12).join("\n"));
                    if (lines.length &gt; 12) console.log(`... (–µ—â—ë ${lines.length - 12} —Å—Ç—Ä–æ–∫)`);
                }

                console.log("‚îÄ".repeat(50));
                const answer = await ask("–†–∞–∑—Ä–µ—à–∏—Ç—å? [y/n]: ");

                if (["y", "–¥", "–¥–∞", "yes"].includes(answer.toLowerCase())) {
                    const result = originalHandler(args);
                    const output = result instanceof Promise ? await result : result;
                    return `‚úÖ ${output} (–æ–¥–æ–±—Ä–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)`;
                }
                return `‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫–ª–æ–Ω–∏–ª –¥–µ–π—Å—Ç–≤–∏–µ ${toolName}`;
            },
        },
    };
}

// === –ó–∞–≥—Ä—É–∑–∫–∞ skills ===
function loadSkills(): Skill[] {
    const discovered = discoverSkills("./skills");
    console.log("\nüîå Activation:");
    const skills: Skill[] = [];

    for (const d of discovered) {
        const meta = activateSkill(d.location);
        switch (meta.name) {
            case "filesystem":
                // –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º write_file –≤ human-in-the-loop
                skills.push(wrapWithConfirmation(createFilesystemSkill(meta), "write_file"));
                break;
            case "bash":
                skills.push(createBashSkill(meta));
                break;
            case "reasoning":
                skills.push(createReasoningSkill(meta));
                break;
            case "interaction":
                skills.push(createInteractionSkill(meta));
                break;
        }
    }

    console.log(`\nüöÄ ${skills.length} skills: ${skills.map(s =&gt; s.name).join(", ")}`);
    return skills;
}

// === –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∞–≥–µ–Ω—Ç ===
async function interactiveAgent(task: string, systemPrompt?: string) {
    const skills = loadSkills();

    const defaultPrompt = `–¢—ã —É–º–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç-–≤–∏–∑–∞—Ä–¥. –í–æ—Ç —Ç–≤–æ–∏ –Ω–∞–≤—ã–∫–∏:

&lt;available_skills&gt;
{{SKILLS}}
&lt;/available_skills&gt;

–°–¢–ò–õ–¨ –†–ê–ë–û–¢–´:
1. –†–∞–∑–±–µ—Ä–∏—Å—å –≤ —Å–∏—Ç—É–∞—Ü–∏–∏ (read_file, run_bash, think)
2. –ü–æ–¥–≥–æ—Ç–æ–≤—å –≤–∞—Ä–∏–∞–Ω—Ç—ã
3. –ü—Ä–µ–¥–ª–æ–∂–∏ –≤—ã–±–æ—Ä —á–µ—Ä–µ–∑ ask_user_choice
4. –£—Ç–æ—á–Ω–∏ –¥–µ—Ç–∞–ª–∏ —á–µ—Ä–µ–∑ ask_user_input
5. –ü–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ ‚Äî ask_user_confirm –∏–ª–∏ write_file (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)

–ù–µ –¥–µ–ª–∞–π –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π ‚Äî —Å–ø—Ä–∞—à–∏–≤–∞–π. –ü—Ä–µ–¥–ª–∞–≥–∞–π 2-4 –≤–∞—Ä–∏–∞–Ω—Ç–∞.`;

    const agent = createAgent(skills, {
        systemPrompt: systemPrompt || defaultPrompt,
        maxIterations: 30,
    });

    await agent(task);
    rl.close();
}

// === –°—Ü–µ–Ω–∞—Ä–∏–∏ ===
async function main() {
    const scenario = process.argv[2] ?? "project";

    switch (scenario) {
        case "project":
            await interactiveAgent(
                "–ü–æ–º–æ–≥–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π TypeScript –ø—Ä–æ–µ–∫—Ç. " +
                "–°–ø—Ä–æ—Å–∏ —á—Ç–æ –∑–∞ –ø—Ä–æ–µ–∫—Ç, –ø—Ä–µ–¥–ª–æ–∂–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –Ω–∞—Å—Ç—Ä–æ–π –≤—Å—ë."
            );
            break;
        case "refactor":
            await interactiveAgent(
                "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π .ts —Ñ–∞–π–ª—ã –≤ src/ –∏ –ø—Ä–µ–¥–ª–æ–∂–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥. " +
                "–ü–æ–∫–∞–∂–∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã, –¥–∞–π –≤—ã–±—Ä–∞—Ç—å, –≤—ã–ø–æ–ª–Ω–∏ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è–º–∏."
            );
            break;
        case "free":
            console.log("ü§ñ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∞–≥–µ–Ω—Ç. –í–≤–µ–¥–∏—Ç–µ –∑–∞–¥–∞—á—É:\n");
            const task = await ask("&gt; ");
            await interactiveAgent(task);
            break;
        default:
            console.log("–°—Ü–µ–Ω–∞—Ä–∏–∏: npx tsx src/08-interactive-agent.ts [project|refactor|free]");
            rl.close();
    }
}

main();</pre>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>

                    <div class="step-detail">
                        <p>–ì–ª–∞–≤–Ω–∞—è —Ö–∏—Ç—Ä–æ—Å—Ç—å: –º–æ–¥–µ–ª—å –Ω–µ –∑–Ω–∞–µ—Ç —á—Ç–æ —ç—Ç–∏ tool'—ã –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ. –î–ª—è –Ω–µ—ë
                            <code>ask_user_choice</code> ‚Äî –æ–±—ã—á–Ω—ã–π tool, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É
                            <code>"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª: ..."</code>. –í—Å—è –º–∞–≥–∏—è –≤ handlers ‚Äî –æ–Ω–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏
                            –∂–¥—É—Ç –≤–≤–æ–¥ —á–µ—Ä–µ–∑ <code>readline</code>.
                        </p>
                    </div>

                    <button class="demo-btn" data-demo="demo-step-8">‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–º–æ</button>

                    <div class="demo-output demo-player" id="demo-step-8" data-demo-chat="step8" aria-live="polite">
                        <div class="demo-player-header">
                            <div class="demo-player-title">–î–µ–º–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –¥–∏–∞–ª–æ–≥–∞</div>
                            <div class="demo-player-count"><span data-demo-index>1</span>/<span data-demo-total>4</span>
                            </div>
                        </div>
                        <div class="demo-chat-body" data-demo-chat-body></div>
                        <div class="demo-player-controls">
                            <button class="demo-step-btn" data-demo-prev>‚Üê –ù–∞–∑–∞–¥</button>
                            <div class="demo-step-label" data-demo-label></div>
                            <button class="demo-step-btn" data-demo-next>–î–∞–ª–µ–µ ‚Üí</button>
                        </div>
                    </div>
                    <div class="output-note" data-demo-note="demo-step-8">–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞. –£ —Ç–µ–±—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω–∞—á–µ ‚Äî —ç—Ç–æ
                        –Ω–æ—Ä–º–∞–ª—å–Ω–æ.</div>

                    <div class="run-command">
                        <span class="run-icon">‚ñ∂</span>
                        <code>npx tsx src/08-interactive-agent.ts project</code>
                    </div>

                    <div class="run-command">
                        <span class="run-icon">‚ñ∂</span>
                        <code>npx tsx src/08-interactive-agent.ts refactor</code>
                    </div>

                    <div class="run-command">
                        <span class="run-icon">‚ñ∂</span>
                        <code>npx tsx src/08-interactive-agent.ts free</code>
                    </div>

                    <div class="mini-block expect">
                        <div class="mini-title">‚úÖ –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è</div>
                        –ê–≥–µ–Ω—Ç –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å—ã (ask_user_choice, ask_user_input), –∂–¥—ë—Ç –≤–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è,
                        –∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é —Ñ–∞–π–ª–æ–≤ (wrapWithConfirmation).
                        –í—Å–µ 4 skills —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ: filesystem, bash, reasoning, interaction.
                    </div>

                    <div class="mini-block trouble">
                        <div class="mini-title">üßØ –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç</div>
                        –ó–∞–ø—É—Å–∫–∞–π –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ (–Ω–µ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞). –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ <code>skills/interaction/SKILL.md</code>
                        —Å–æ–∑–¥–∞–Ω –∏ —á—Ç–æ readline/STDIN –¥–æ—Å—Ç—É–ø–Ω—ã.
                    </div>

                    <div class="key-insight">
                        <strong>üí° –ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è:</strong> –ú–æ–¥–µ–ª—å –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ —ç—Ç–∏ tool'—ã –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ.
                        –î–ª—è –Ω–µ—ë <code>ask_user_choice</code> ‚Äî –æ–±—ã—á–Ω—ã–π tool, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É
                        <code>"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª: ..."</code>.
                        –í—Å—è –º–∞–≥–∏—è –≤ handlers ‚Äî –æ–Ω–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –∂–¥—É—Ç –≤–≤–æ–¥ —á–µ—Ä–µ–∑ <code>readline</code>.
                        –ú–æ–¥–µ–ª—å –¥—É–º–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ—Å—Ç–æ –≤—ã–∑–≤–∞–ª–∞ —Ñ—É–Ω–∫—Ü–∏—é –∏ –ø–æ–ª—É—á–∏–ª–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
                        <br><br>
                        <strong>wrapWithConfirmation</strong> ‚Äî –ø–∞—Ç—Ç–µ—Ä–Ω –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏. –ë–µ—Ä—ë–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π skill
                        (filesystem), –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º –æ–¥–∏–Ω handler (write_file) –≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ. Skill –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è ‚Äî
                        –º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫. –≠—Ç–æ —Ç–æ—Ç –∂–µ –ø—Ä–∏–Ω—Ü–∏–ø —á—Ç–æ –∏ middleware –≤ Express.
                        <br><br>
                        <strong>Async handlers</strong> ‚Äî <code>createAgent()</code> –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏—Ö –∏–∑ –∫–æ—Ä–æ–±–∫–∏.
                        –î–æ–±–∞–≤–∏—Ç—å human-in-the-loop = –¥–æ–±–∞–≤–∏—Ç—å skill + –æ–±—ë—Ä—Ç–∫—É. Agent loop –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–µ–º –∂–µ.
                    </div>
                </div>
            </div>
        </div>

<!-- –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ —É—Ä–æ–∫–∞ -->
<script type="application/json" data-demo-steps="step8">
[
    {
        "label": "–ó–∞–ø—Ä–æ—Å",
        "messages": [
            {
                "role": "user",
                "text": "–ü–æ–º–æ–≥–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π TypeScript –ø—Ä–æ–µ–∫—Ç. –°–ø—Ä–æ—Å–∏ —á—Ç–æ –∑–∞ –ø—Ä–æ–µ–∫—Ç, –ø—Ä–µ–¥–ª–æ–∂–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –Ω–∞—Å—Ç—Ä–æ–π –≤—Å—ë."
            },
            {
                "role": "tool_call",
                "text": "ask_user_input({ question: \"–ö–∞–∫–æ–π –ø—Ä–æ–µ–∫—Ç —Ç—ã —Ö–æ—á–µ—à—å —Å–æ–∑–¥–∞—Ç—å?\", hint: \"–ù–∞–ø—Ä–∏–º–µ—Ä: REST API, CLI —É—Ç–∏–ª–∏—Ç–∞, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ\" })"
            },
            {
                "role": "tool_result",
                "text": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤—ë–ª: \"REST API\""
            }
        ]
    },
    {
        "label": "–í—ã–±–æ—Ä—ã",
        "messages": [
            {
                "role": "tool_call",
                "text": "ask_user_choice({ question: \"–ö–∞–∫–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫?\", options: [\"Express.js (–∫–ª–∞—Å—Å–∏–∫–∞) ‚Äî –≥–∏–±–∫–∏–π –∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π\", \"Fastify (–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å) ‚Äî –±—ã—Å—Ç—Ä—ã–π, –Ω–∞—Ç–∏–≤–Ω—ã–π TypeScript\", \"NestJS (enterprise) ‚Äî DI, –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å, –∫–∞–∫ Angular\"] })"
            },
            {
                "role": "tool_result",
                "text": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª: \"Express.js (–∫–ª–∞—Å—Å–∏–∫–∞)\" ‚Äî –≥–∏–±–∫–∏–π –∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π"
            },
            {
                "role": "tool_call",
                "text": "ask_user_choice({ question: \"–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞?\", options: [\"–ü—Ä–æ—Å—Ç–∞—è (Flat) ‚Äî src/index.ts, routes, middleware\", \"–°–ª–æ–∏—Å—Ç–∞—è (Layered) ‚Äî Controllers ‚Üí Services ‚Üí Models\", \"–ú–æ–¥—É–ª—å–Ω–∞—è (Feature-based) ‚Äî –ø–∞–ø–∫–∏ –ø–æ —Ñ–∏—á–∞–º\"] })"
            },
            {
                "role": "tool_result",
                "text": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª: \"–ü—Ä–æ—Å—Ç–∞—è (Flat)\""
            },
            {
                "role": "tool_call",
                "text": "ask_user_input({ question: \"–ö–∞–∫ –Ω–∞–∑–æ–≤—ë–º –ø—Ä–æ–µ–∫—Ç?\", default_value: \"my-express-api\" })"
            },
            {
                "role": "tool_result",
                "text": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤—ë–ª: \"mini-api\""
            },
            {
                "role": "tool_call",
                "text": "ask_user_choice({ question: \"–î–æ–ø. –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã?\", options: [\"–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π ‚Äî TS + Express + nodemon\", \"–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π ‚Äî + ESLint, Prettier, dotenv, cors\", \"–ü–æ–ª–Ω—ã–π ‚Äî + Jest, Zod, Winston, Docker\"] })"
            },
            {
                "role": "tool_result",
                "text": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª: \"–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π\""
            }
        ]
    },
    {
        "label": "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ",
        "messages": [
            {
                "role": "tool_call",
                "text": "ask_user_confirm({ question: \"–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç mini-api?\", details: \"Express.js + TypeScript, –ø—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤\" })"
            },
            {
                "role": "tool_result",
                "text": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª: –î–ê"
            }
        ]
    },
    {
        "label": "–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤",
        "messages": [
            {
                "role": "tool_call",
                "text": "run_bash({\"command\":\"mkdir -p mini-api/src/routes mini-api/src/middleware\"})"
            },
            {
                "role": "tool_result",
                "text": ""
            },
            {
                "role": "tool_call",
                "text": "write_file({path: \"mini-api/package.json\", content: [520 chars]})"
            },
            {
                "role": "tool_result",
                "text": "‚úÖ –§–∞–π–ª mini-api/package.json –∑–∞–ø–∏—Å–∞–Ω (–æ–¥–æ–±—Ä–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)"
            },
            {
                "role": "tool_call",
                "text": "write_file({path: \"mini-api/tsconfig.json\", content: [280 chars]})"
            },
            {
                "role": "tool_result",
                "text": "‚úÖ –§–∞–π–ª mini-api/tsconfig.json –∑–∞–ø–∏—Å–∞–Ω (–æ–¥–æ–±—Ä–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)"
            },
            {
                "role": "tool_call",
                "text": "write_file({path: \"mini-api/src/index.ts\", content: [890 chars]})"
            },
            {
                "role": "tool_result",
                "text": "‚úÖ –§–∞–π–ª mini-api/src/index.ts –∑–∞–ø–∏—Å–∞–Ω (–æ–¥–æ–±—Ä–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)"
            },
            {
                "role": "tool_call",
                "text": "write_file({path: \"mini-api/src/routes/api.ts\", content: [420 chars]})"
            },
            {
                "role": "tool_result",
                "text": "‚úÖ –§–∞–π–ª mini-api/src/routes/api.ts –∑–∞–ø–∏—Å–∞–Ω (–æ–¥–æ–±—Ä–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)"
            }
        ]
    },
    {
        "label": "–ò—Ç–æ–≥",
        "messages": [
            {
                "role": "llm",
                "text": "‚úÖ –ü—Ä–æ–µ–∫—Ç mini-api —Å–æ–∑–¥–∞–Ω!\n\nüìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞:\n```\nmini-api/\n‚îú‚îÄ‚îÄ src/\n‚îÇ   ‚îú‚îÄ‚îÄ index.ts\n‚îÇ   ‚îú‚îÄ‚îÄ routes/api.ts\n‚îÇ   ‚îî‚îÄ‚îÄ middleware/\n‚îú‚îÄ‚îÄ package.json\n‚îî‚îÄ‚îÄ tsconfig.json\n```\n\nüöÄ –ó–∞–ø—É—Å–∫:\n```bash\ncd mini-api && npm install && npm run dev\n```\n\n–í—Å–µ 4 skills —Ä–∞–±–æ—Ç–∞–ª–∏ –≤–º–µ—Å—Ç–µ:\n‚Ä¢ **interaction** ‚Äî –æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (wizard-—Å—Ç–∏–ª—å)\n‚Ä¢ **filesystem** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)\n‚Ä¢ **bash** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π\n‚Ä¢ **reasoning** ‚Äî –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã"
            }
        ]
    }
]
</script>
